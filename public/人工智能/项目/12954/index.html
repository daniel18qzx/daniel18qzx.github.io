<!DOCTYPE html>












  


<html class="theme-next gemini use-motion" lang="zh-cn">
<head><meta name="generator" content="Hexo 3.9.0">
  <meta charset="UTF-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=2">
<meta name="theme-color" content="#222">






















<link rel="stylesheet" href="/lib/font-awesome/css/font-awesome.min.css?v=4.7.0">

<link rel="stylesheet" href="/css/main.css?v=7.1.2">



  <link rel="icon" type="image/png" sizes="32x32" href="/images/favicon-32x32-next.png?v=7.1.2">


  <link rel="icon" type="image/png" sizes="16x16" href="/images/favicon-16x16-next.png?v=7.1.2">








<script id="hexo.configurations">
  var NexT = window.NexT || {};
  var CONFIG = {
    root: '/',
    scheme: 'Gemini',
    version: '7.1.2',
    sidebar: {"position":"left","display":"post","offset":12,"onmobile":false,"dimmer":false},
    back2top: true,
    back2top_sidebar: true,
    fancybox: false,
    fastclick: false,
    lazyload: false,
    tabs: true,
    motion: {"enable":true,"async":false,"transition":{"post_block":"fadeIn","post_header":"slideDownIn","post_body":"slideDownIn","coll_header":"slideLeftIn","sidebar":"slideUpIn"}},
    algolia: {
      applicationID: '',
      apiKey: '',
      indexName: '',
      hits: {"per_page":10},
      labels: {"input_placeholder":"Search for Posts","hits_empty":"We didn't find any results for the search: ${query}","hits_stats":"${hits} results found in ${time} ms"}
    }
  };
</script>


  




  <meta name="description" content="数据集载入12345678910import pandas as pdimport numpy as npfrom matplotlib import pyplot as plt%matplotlib inlineimport seaborn as snsimport warningswarnings.filterwarnings(&apos;ignore&apos;)df = pd.read_csv(&quot;2019-0">
<meta property="og:type" content="article">
<meta property="og:title" content="泰坦尼克之灾（六大模型baseline）">
<meta property="og:url" content="https://daniel18qzx.github.io/人工智能/项目/12954/index.html">
<meta property="og:site_name" content="菜鸟分析狮">
<meta property="og:description" content="数据集载入12345678910import pandas as pdimport numpy as npfrom matplotlib import pyplot as plt%matplotlib inlineimport seaborn as snsimport warningswarnings.filterwarnings(&apos;ignore&apos;)df = pd.read_csv(&quot;2019-0">
<meta property="og:locale" content="zh-cn">
<meta property="og:image" content="https://daniel18qzx.github.io/img/2019-08-15_泰坦尼克之灾_1.png">
<meta property="og:image" content="https://daniel18qzx.github.io/img/2019-08-15_泰坦尼克之灾_2.png">
<meta property="og:image" content="https://daniel18qzx.github.io/img/2019-08-15_泰坦尼克之灾_3.png">
<meta property="og:image" content="https://daniel18qzx.github.io/img/2019-08-15_泰坦尼克之灾_4.png">
<meta property="og:image" content="https://daniel18qzx.github.io/img/2019-08-15_泰坦尼克之灾_5.png">
<meta property="og:image" content="https://daniel18qzx.github.io/img/2019-08-15_泰坦尼克之灾_6.png">
<meta property="og:image" content="https://daniel18qzx.github.io/img/2019-08-15_泰坦尼克之灾_7.png">
<meta property="og:image" content="https://daniel18qzx.github.io/img/2019-08-15_泰坦尼克之灾_8.png">
<meta property="og:image" content="https://daniel18qzx.github.io/img/2019-08-15_泰坦尼克之灾_9.png">
<meta property="og:image" content="https://daniel18qzx.github.io/img/2019-08-15_泰坦尼克之灾_10.png">
<meta property="og:image" content="https://daniel18qzx.github.io/img/2019-08-15_泰坦尼克之灾_11.png">
<meta property="og:image" content="https://daniel18qzx.github.io/img/2019-08-15_泰坦尼克之灾_12.png">
<meta property="og:updated_time" content="2019-08-28T07:12:11.227Z">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="泰坦尼克之灾（六大模型baseline）">
<meta name="twitter:description" content="数据集载入12345678910import pandas as pdimport numpy as npfrom matplotlib import pyplot as plt%matplotlib inlineimport seaborn as snsimport warningswarnings.filterwarnings(&apos;ignore&apos;)df = pd.read_csv(&quot;2019-0">
<meta name="twitter:image" content="https://daniel18qzx.github.io/img/2019-08-15_泰坦尼克之灾_1.png">





  
  
  <link rel="canonical" href="https://daniel18qzx.github.io/人工智能/项目/12954/">



<script id="page.configurations">
  CONFIG.page = {
    sidebar: "",
  };
</script>

  <title>泰坦尼克之灾（六大模型baseline） | 菜鸟分析狮</title>
  












  <noscript>
  <style>
  .use-motion .motion-element,
  .use-motion .brand,
  .use-motion .menu-item,
  .sidebar-inner,
  .use-motion .post-block,
  .use-motion .pagination,
  .use-motion .comments,
  .use-motion .post-header,
  .use-motion .post-body,
  .use-motion .collection-title { opacity: initial; }

  .use-motion .logo,
  .use-motion .site-title,
  .use-motion .site-subtitle {
    opacity: initial;
    top: initial;
  }

  .use-motion .logo-line-before i { left: initial; }
  .use-motion .logo-line-after i { right: initial; }
  </style>
</noscript>

</head>

<body itemscope itemtype="http://schema.org/WebPage" lang="zh-cn">

  
  
    
  

  <div class="container sidebar-position-left page-post-detail">
    <div class="headband"></div>

    <header id="header" class="header" itemscope itemtype="http://schema.org/WPHeader">
      <div class="header-inner"><div class="site-brand-wrapper">
  <div class="site-meta">
    

    <div class="custom-logo-site-title">
      <a href="/" class="brand" rel="start">
        <span class="logo-line-before"><i></i></span>
        <span class="site-title">菜鸟分析狮</span>
        <span class="logo-line-after"><i></i></span>
      </a>
    </div>
    
      
        <h1 class="site-subtitle" itemprop="description">没有难处理的数据，没有难写的报告</h1>
      
    
    
  </div>

  <div class="site-nav-toggle">
    <button aria-label="Toggle navigation bar">
      <span class="btn-bar"></span>
      <span class="btn-bar"></span>
      <span class="btn-bar"></span>
    </button>
  </div>
</div>



<nav class="site-nav">
  
    <ul id="menu" class="menu">
      
        
        
        
          
          <li class="menu-item menu-item-home">

    
    
    
      
    

    

    <a href="/" rel="section"><i class="menu-item-icon fa fa-fw fa-homemenu"></i> <br>Home</a>

  </li>
        
        
        
          
          <li class="menu-item menu-item-categories">

    
    
    
      
    

    

    <a href="/categories/" rel="section"><i class="menu-item-icon fa fa-fw fa-th"></i> <br>Categories</a>

  </li>
        
        
        
          
          <li class="menu-item menu-item-archives">

    
    
    
      
    

    

    <a href="/archives/" rel="section"><i class="menu-item-icon fa fa-fw fa-archive"></i> <br>Archives</a>

  </li>

      
      
        <li class="menu-item menu-item-search">
          
            <a href="javascript:;" class="popup-trigger">
          
            
              <i class="menu-item-icon fa fa-search fa-fw"></i> <br>Search</a>
        </li>
      
    </ul>
  

  

  
    <div class="site-search">
      
  <div class="popup search-popup local-search-popup">
  <div class="local-search-header clearfix">
    <span class="search-icon">
      <i class="fa fa-search"></i>
    </span>
    <span class="popup-btn-close">
      <i class="fa fa-times-circle"></i>
    </span>
    <div class="local-search-input-wrapper">
      <input autocomplete="off" placeholder="Searching..." spellcheck="false" type="text" id="local-search-input">
    </div>
  </div>
  <div id="local-search-result"></div>
</div>



    </div>
  
</nav>



  



</div>
    </header>

    


    <main id="main" class="main">
      <div class="main-inner">
        <div class="content-wrap">
          
            

          
          <div id="content" class="content">
            

  <div id="posts" class="posts-expand">
    

  

  
  
  

  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="https://daniel18qzx.github.io/人工智能/项目/12954/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="Dan">
      <meta itemprop="description" content>
      <meta itemprop="image" content="/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="菜鸟分析狮">
    </span>

    
      <header class="post-header">

        
        
          <h2 class="post-title" itemprop="name headline">泰坦尼克之灾（六大模型baseline）

              
            
          </h2>
        

        <div class="post-meta">
          <span class="post-time">

            
            
            

            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">Posted on</span>
              

              
                
              

              <time title="Created: 2019-08-15 00:00:00" itemprop="dateCreated datePublished" datetime="2019-08-15T00:00:00+08:00">2019-08-15</time>
            

            
              

              
                
                <span class="post-meta-divider">|</span>
                

                <span class="post-meta-item-icon">
                  <i class="fa fa-calendar-check-o"></i>
                </span>
                
                  <span class="post-meta-item-text">Edited on</span>
                
                <time title="Modified: 2019-08-28 15:12:11" itemprop="dateModified" datetime="2019-08-28T15:12:11+08:00">2019-08-28</time>
              
            
          </span>

          
            <span class="post-category">
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">In</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing"><a href="/categories/人工智能/" itemprop="url" rel="index"><span itemprop="name">人工智能</span></a></span>

                
                
                  , 
                
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing"><a href="/categories/人工智能/项目/" itemprop="url" rel="index"><span itemprop="name">项目</span></a></span>

                
                
              
            </span>
          

          
            
            
              
              <span class="post-comments-count">
                <span class="post-meta-divider">|</span>
                <span class="post-meta-item-icon">
                  <i class="fa fa-comment-o"></i>
                </span>
            
                <span class="post-meta-item-text">Comments: </span>
                <a href="/人工智能/项目/12954/#comments" itemprop="discussionUrl">
                  <span class="post-comments-count gitment-comments-count" data-xid="/人工智能/项目/12954/" itemprop="commentCount"></span>
                </a>
              </span>
            
          

          
          

          
            <span class="post-meta-divider">|</span>
            <span class="post-meta-item-icon">
            <i class="fa fa-eye"></i>
             Views:  
            <span class="busuanzi-value" id="busuanzi_value_page_pv"></span>
            </span>
          

          
            <div class="post-symbolscount">
              

              
                <span class="post-meta-item-icon">
                  <i class="fa fa-file-word-o"></i>
                </span>
                
                  <span class="post-meta-item-text">Symbols count in article: </span>
                
                <span title="Symbols count in article">36k</span>
              

              
                <span class="post-meta-divider">|</span>
              

              
                <span class="post-meta-item-icon">
                  <i class="fa fa-clock-o"></i>
                </span>
                
                  <span class="post-meta-item-text">Reading time &asymp;</span>
                
                <span title="Reading time">1:01</span>
              
            </div>
          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        <h2 id="数据集载入"><a href="#数据集载入" class="headerlink" title="数据集载入"></a>数据集载入</h2><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> pandas <span class="keyword">as</span> pd</span><br><span class="line"><span class="keyword">import</span> numpy <span class="keyword">as</span> np</span><br><span class="line"><span class="keyword">from</span> matplotlib <span class="keyword">import</span> pyplot <span class="keyword">as</span> plt</span><br><span class="line">%matplotlib inline</span><br><span class="line"><span class="keyword">import</span> seaborn <span class="keyword">as</span> sns</span><br><span class="line"><span class="keyword">import</span> warnings</span><br><span class="line">warnings.filterwarnings(<span class="string">'ignore'</span>)</span><br><span class="line"></span><br><span class="line">df = pd.read_csv(<span class="string">"2019-08-15_泰坦尼克之灾_train.csv"</span>)</span><br><span class="line">df.head()</span><br></pre></td></tr></table></figure>
<div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>PassengerId</th>
      <th>Survived</th>
      <th>Pclass</th>
      <th>Name</th>
      <th>Sex</th>
      <th>Age</th>
      <th>SibSp</th>
      <th>Parch</th>
      <th>Ticket</th>
      <th>Fare</th>
      <th>Cabin</th>
      <th>Embarked</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>0</th>
      <td>1</td>
      <td>0</td>
      <td>3</td>
      <td>Braund, Mr. Owen Harris</td>
      <td>male</td>
      <td>22.0</td>
      <td>1</td>
      <td>0</td>
      <td>A/5 21171</td>
      <td>7.2500</td>
      <td>NaN</td>
      <td>S</td>
    </tr>
    <tr>
      <th>1</th>
      <td>2</td>
      <td>1</td>
      <td>1</td>
      <td>Cumings, Mrs. John Bradley (Florence Briggs Th...</td>
      <td>female</td>
      <td>38.0</td>
      <td>1</td>
      <td>0</td>
      <td>PC 17599</td>
      <td>71.2833</td>
      <td>C85</td>
      <td>C</td>
    </tr>
    <tr>
      <th>2</th>
      <td>3</td>
      <td>1</td>
      <td>3</td>
      <td>Heikkinen, Miss. Laina</td>
      <td>female</td>
      <td>26.0</td>
      <td>0</td>
      <td>0</td>
      <td>STON/O2. 3101282</td>
      <td>7.9250</td>
      <td>NaN</td>
      <td>S</td>
    </tr>
    <tr>
      <th>3</th>
      <td>4</td>
      <td>1</td>
      <td>1</td>
      <td>Futrelle, Mrs. Jacques Heath (Lily May Peel)</td>
      <td>female</td>
      <td>35.0</td>
      <td>1</td>
      <td>0</td>
      <td>113803</td>
      <td>53.1000</td>
      <td>C123</td>
      <td>S</td>
    </tr>
    <tr>
      <th>4</th>
      <td>5</td>
      <td>0</td>
      <td>3</td>
      <td>Allen, Mr. William Henry</td>
      <td>male</td>
      <td>35.0</td>
      <td>0</td>
      <td>0</td>
      <td>373450</td>
      <td>8.0500</td>
      <td>NaN</td>
      <td>S</td>
    </tr>
  </tbody>
</table>
</div>




<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">df.info()</span><br></pre></td></tr></table></figure>
<pre><code>&lt;class &#39;pandas.core.frame.DataFrame&#39;&gt;
RangeIndex: 891 entries, 0 to 890
Data columns (total 12 columns):
PassengerId    891 non-null int64
Survived       891 non-null int64
Pclass         891 non-null int64
Name           891 non-null object
Sex            891 non-null object
Age            714 non-null float64
SibSp          891 non-null int64
Parch          891 non-null int64
Ticket         891 non-null object
Fare           891 non-null float64
Cabin          204 non-null object
Embarked       889 non-null object
dtypes: float64(2), int64(5), object(5)
memory usage: 83.6+ KB
</code></pre><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">typedic = &#123;&#125;  <span class="comment"># 类型字典</span></span><br><span class="line"><span class="keyword">for</span> name <span class="keyword">in</span> df.columns:</span><br><span class="line">    typedic[str(</span><br><span class="line">        df[name].dtype)] = typedic.get(str(df[name].dtype), []) + [name]</span><br><span class="line"></span><br><span class="line"><span class="keyword">for</span> key, value <span class="keyword">in</span> typedic.items():</span><br><span class="line">    print(<span class="string">"&#123;&#125;格式共有&#123;&#125;个: &#123;&#125;"</span>.format(key, len(value), value))</span><br><span class="line">    print(<span class="string">""</span>)</span><br></pre></td></tr></table></figure>
<pre><code>int64格式共有5个: [&#39;PassengerId&#39;, &#39;Survived&#39;, &#39;Pclass&#39;, &#39;SibSp&#39;, &#39;Parch&#39;]

object格式共有5个: [&#39;Name&#39;, &#39;Sex&#39;, &#39;Ticket&#39;, &#39;Cabin&#39;, &#39;Embarked&#39;]

float64格式共有2个: [&#39;Age&#39;, &#39;Fare&#39;]
</code></pre><p>至此可以看到数据不全的有：[‘Age’,’Cabin’]</p>
<p>需要调整类型或删除无用资讯的包含：[‘Name’, ‘Sex’, ‘Ticket’, ‘Cabin’, ‘Embarked’]</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">df.Survived.value_counts()</span><br></pre></td></tr></table></figure>
<pre><code>0    549
1    342
Name: Survived, dtype: int64
</code></pre><h2 id="数据探索"><a href="#数据探索" class="headerlink" title="数据探索"></a>数据探索</h2><h3 id="察看空值分布"><a href="#察看空值分布" class="headerlink" title="察看空值分布"></a>察看空值分布</h3><p>可以看到总共有三个特征有空值，分别是 Cabin 、 Age 与 Embarked</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">fig, ax = plt.subplots(figsize=(<span class="number">9</span>, <span class="number">5</span>))</span><br><span class="line">sns.heatmap(df.isnull(), cbar=<span class="literal">False</span>, cmap=<span class="string">"YlGnBu_r"</span>)</span><br><span class="line">plt.savefig(<span class="string">"../img/2019-08-15_泰坦尼克之灾_1.png"</span>)</span><br><span class="line">plt.close()</span><br></pre></td></tr></table></figure>
<p><img src="/img/2019-08-15_泰坦尼克之灾_1.png" alt></p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">total = df.isnull().sum().sort_values(ascending=<span class="literal">False</span>)</span><br><span class="line">percent = round(df.isnull().sum().sort_values(ascending=<span class="literal">False</span>) / len(df) * <span class="number">100</span>,</span><br><span class="line">                <span class="number">2</span>)</span><br><span class="line">temp = pd.concat([total, percent], axis=<span class="number">1</span>, keys=[<span class="string">'Total'</span>, <span class="string">'Percent'</span>])</span><br><span class="line">temp</span><br></pre></td></tr></table></figure>
<div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>Total</th>
      <th>Percent</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>Cabin</th>
      <td>687</td>
      <td>77.10</td>
    </tr>
    <tr>
      <th>Age</th>
      <td>177</td>
      <td>19.87</td>
    </tr>
    <tr>
      <th>Embarked</th>
      <td>2</td>
      <td>0.22</td>
    </tr>
    <tr>
      <th>Fare</th>
      <td>0</td>
      <td>0.00</td>
    </tr>
    <tr>
      <th>Ticket</th>
      <td>0</td>
      <td>0.00</td>
    </tr>
    <tr>
      <th>Parch</th>
      <td>0</td>
      <td>0.00</td>
    </tr>
    <tr>
      <th>SibSp</th>
      <td>0</td>
      <td>0.00</td>
    </tr>
    <tr>
      <th>Sex</th>
      <td>0</td>
      <td>0.00</td>
    </tr>
    <tr>
      <th>Name</th>
      <td>0</td>
      <td>0.00</td>
    </tr>
    <tr>
      <th>Pclass</th>
      <td>0</td>
      <td>0.00</td>
    </tr>
    <tr>
      <th>Survived</th>
      <td>0</td>
      <td>0.00</td>
    </tr>
    <tr>
      <th>PassengerId</th>
      <td>0</td>
      <td>0.00</td>
    </tr>
  </tbody>
</table>
</div>




<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">ax = sns.barplot(data=df.isnull())</span><br><span class="line">plt.xticks(rotation=<span class="number">90</span>)</span><br><span class="line">plt.savefig(<span class="string">"../img/2019-08-15_泰坦尼克之灾_2.png"</span>)</span><br><span class="line">plt.close()</span><br></pre></td></tr></table></figure>
<p><img src="/img/2019-08-15_泰坦尼克之灾_2.png" alt></p>
<h3 id="Column-Survival"><a href="#Column-Survival" class="headerlink" title="Column : Survival"></a>Column : Survival</h3><p>存活的有 61.6%，占多数，样本比例为 1.6</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">f, ax = plt.subplots(<span class="number">1</span>, <span class="number">2</span>, figsize=(<span class="number">13</span>, <span class="number">5</span>))</span><br><span class="line">df[<span class="string">'Survived'</span>].value_counts().plot.pie(</span><br><span class="line">    explode=[<span class="number">0</span>, <span class="number">0.05</span>], autopct=<span class="string">'%1.1f%%'</span>, ax=ax[<span class="number">0</span>], shadow=<span class="literal">True</span>)</span><br><span class="line">ax[<span class="number">0</span>].set_title(<span class="string">'Survived'</span>)</span><br><span class="line">ax[<span class="number">0</span>].set_ylabel(<span class="string">''</span>)</span><br><span class="line">sns.countplot(<span class="string">'Survived'</span>, data=df, ax=ax[<span class="number">1</span>])</span><br><span class="line">ax[<span class="number">1</span>].set_title(<span class="string">'Survived'</span>)</span><br><span class="line">plt.savefig(<span class="string">"../img/2019-08-15_泰坦尼克之灾_3.png"</span>)</span><br><span class="line">plt.close()</span><br></pre></td></tr></table></figure>
<p><img src="/img/2019-08-15_泰坦尼克之灾_3.png" alt></p>
<h3 id="Feature-Sex"><a href="#Feature-Sex" class="headerlink" title="Feature: Sex"></a>Feature: Sex</h3><p>女性存活率大于7成，男性约两成</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">f, ax = plt.subplots(<span class="number">1</span>, <span class="number">2</span>, figsize=(<span class="number">18</span>, <span class="number">5</span>))</span><br><span class="line">df[[<span class="string">'Sex'</span>, <span class="string">'Survived'</span>]].groupby([<span class="string">'Sex'</span>]).mean().plot.bar(ax=ax[<span class="number">0</span>])</span><br><span class="line">ax[<span class="number">0</span>].set_title(<span class="string">'Fraction of Survival with respect to Sex'</span>)</span><br><span class="line">sns.countplot(<span class="string">'Sex'</span>, hue=<span class="string">'Survived'</span>, data=df, ax=ax[<span class="number">1</span>])</span><br><span class="line">ax[<span class="number">1</span>].set_title(<span class="string">'Survived vs Dead counts with respect to Sex'</span>)</span><br><span class="line">plt.savefig(<span class="string">"../img/2019-08-15_泰坦尼克之灾_4.png"</span>)</span><br><span class="line">plt.close()</span><br></pre></td></tr></table></figure>
<p><img src="/img/2019-08-15_泰坦尼克之灾_4.png" alt></p>
<h3 id="Feature-Pclass"><a href="#Feature-Pclass" class="headerlink" title="Feature: Pclass"></a>Feature: Pclass</h3><p>大多数乘客在第三舱等，存活率依序从1舱等递减至3舱等</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">f, ax = plt.subplots(<span class="number">1</span>, <span class="number">3</span>, figsize=(<span class="number">18</span>, <span class="number">5</span>))</span><br><span class="line">df[<span class="string">'Pclass'</span>].value_counts().plot.bar(</span><br><span class="line">    color=[<span class="string">'#BC8F8F'</span>, <span class="string">'#F4A460'</span>, <span class="string">'#DAA520'</span>], ax=ax[<span class="number">0</span>])</span><br><span class="line">ax[<span class="number">0</span>].set_title(<span class="string">'Number Of Passengers with respect to Pclass'</span>)</span><br><span class="line">ax[<span class="number">0</span>].set_ylabel(<span class="string">'Count'</span>)</span><br><span class="line">sns.countplot(<span class="string">'Pclass'</span>, hue=<span class="string">'Survived'</span>, data=df, ax=ax[<span class="number">1</span>])</span><br><span class="line">ax[<span class="number">1</span>].set_title(<span class="string">'Survived vs Dead counts with respect to Pclass'</span>)</span><br><span class="line">sns.barplot(x=<span class="string">"Pclass"</span>, y=<span class="string">"Survived"</span>, data=df, ax=ax[<span class="number">2</span>])</span><br><span class="line">ax[<span class="number">2</span>].set_title(<span class="string">'Survival by Pclass'</span>)</span><br><span class="line">plt.savefig(<span class="string">"../img/2019-08-15_泰坦尼克之灾_5.png"</span>)</span><br><span class="line">plt.close()</span><br></pre></td></tr></table></figure>
<p><img src="/img/2019-08-15_泰坦尼克之灾_5.png" alt></p>
<h3 id="Feature-Age"><a href="#Feature-Age" class="headerlink" title="Feature: Age"></a>Feature: Age</h3><p>年龄分布上以年轻人、小孩居多，最高有80岁老人</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">f, ax = plt.subplots(<span class="number">1</span>, <span class="number">1</span>, figsize=(<span class="number">25</span>, <span class="number">6</span>))</span><br><span class="line">sns.barplot(df[<span class="string">'Age'</span>], df[<span class="string">'Survived'</span>], ci=<span class="literal">None</span>, ax=ax)</span><br><span class="line">ax.set_title(<span class="string">'Survived vs Dead counts with respect to Pclass'</span>)</span><br><span class="line">plt.xticks(rotation=<span class="number">90</span>)</span><br><span class="line">plt.savefig(<span class="string">"../img/2019-08-15_泰坦尼克之灾_6.png"</span>)</span><br><span class="line">plt.close()</span><br></pre></td></tr></table></figure>
<p><img src="/img/2019-08-15_泰坦尼克之灾_6.png" alt></p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">f, ax = plt.subplots(<span class="number">1</span>, <span class="number">2</span>, figsize=(<span class="number">18</span>, <span class="number">6</span>))</span><br><span class="line"></span><br><span class="line">ax[<span class="number">0</span>].set_title(<span class="string">'Age Box Plot'</span>)</span><br><span class="line">ax[<span class="number">0</span>].set_ylabel(<span class="string">'Age Years'</span>)</span><br><span class="line"></span><br><span class="line">sns.boxplot(y=<span class="string">'Age'</span>, data=df, ax=ax[<span class="number">0</span>])</span><br><span class="line"></span><br><span class="line">sns.boxplot(x=<span class="string">'Survived'</span>, y=<span class="string">'Age'</span>, data=df, ax=ax[<span class="number">1</span>])</span><br><span class="line">ax[<span class="number">1</span>].set_title(<span class="string">'Age Box Plot'</span>)</span><br><span class="line">ax[<span class="number">1</span>].set_ylabel(<span class="string">'Age Years'</span>)</span><br><span class="line"></span><br><span class="line">plt.savefig(<span class="string">"../img/2019-08-15_泰坦尼克之灾_7.png"</span>)</span><br><span class="line">plt.close()</span><br></pre></td></tr></table></figure>
<p><img src="/img/2019-08-15_泰坦尼克之灾_7.png" alt></p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">f, ax = plt.subplots(<span class="number">1</span>, <span class="number">2</span>, figsize=(<span class="number">18</span>, <span class="number">8</span>))</span><br><span class="line">sns.violinplot(</span><br><span class="line">    <span class="string">"Pclass"</span>, <span class="string">"Age"</span>, hue=<span class="string">"Survived"</span>, data=df, split=<span class="literal">True</span>, ax=ax[<span class="number">0</span>])</span><br><span class="line">ax[<span class="number">0</span>].set_title(<span class="string">'Pclass and Age vs Survived'</span>)</span><br><span class="line">ax[<span class="number">0</span>].set_yticks(range(<span class="number">0</span>, <span class="number">110</span>, <span class="number">10</span>))</span><br><span class="line">sns.violinplot(</span><br><span class="line">    <span class="string">"Sex"</span>, <span class="string">"Age"</span>, hue=<span class="string">"Survived"</span>, data=df, split=<span class="literal">True</span>, ax=ax[<span class="number">1</span>])</span><br><span class="line">ax[<span class="number">1</span>].set_title(<span class="string">'Sex and Age vs Survived'</span>)</span><br><span class="line">ax[<span class="number">1</span>].set_yticks(range(<span class="number">0</span>, <span class="number">110</span>, <span class="number">10</span>))</span><br><span class="line"></span><br><span class="line">plt.savefig(<span class="string">"../img/2019-08-15_泰坦尼克之灾_8.png"</span>)</span><br><span class="line">plt.close()</span><br></pre></td></tr></table></figure>
<p><img src="/img/2019-08-15_泰坦尼克之灾_8.png" alt></p>
<h3 id="Feature-Embarked"><a href="#Feature-Embarked" class="headerlink" title="Feature: Embarked"></a>Feature: Embarked</h3><p>大多数乘客是从S登船口，存活率以c最高</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">f, ax = plt.subplots(<span class="number">1</span>, <span class="number">3</span>, figsize=(<span class="number">12</span>, <span class="number">5</span>))</span><br><span class="line">sns.countplot(<span class="string">'Embarked'</span>, data=df, ax=ax[<span class="number">0</span>])</span><br><span class="line">ax[<span class="number">0</span>].set_title(<span class="string">'No. Of Passengers Boarded'</span>)</span><br><span class="line">sns.countplot(<span class="string">'Embarked'</span>, hue=<span class="string">'Survived'</span>, data=df, ax=ax[<span class="number">1</span>])</span><br><span class="line">ax[<span class="number">1</span>].set_title(<span class="string">'Embarked vs Survived'</span>)</span><br><span class="line">sns.barplot(<span class="string">'Embarked'</span>, <span class="string">'Survived'</span>, data=df, ax=ax[<span class="number">2</span>])</span><br><span class="line">ax[<span class="number">2</span>].set_title(<span class="string">'Embarked vs Survived'</span>)</span><br><span class="line"></span><br><span class="line">plt.savefig(<span class="string">"../img/2019-08-15_泰坦尼克之灾_9.png"</span>)</span><br><span class="line">plt.close()</span><br></pre></td></tr></table></figure>
<p><img src="/img/2019-08-15_泰坦尼克之灾_9.png" alt></p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">f, ax = plt.subplots(<span class="number">1</span>, <span class="number">2</span>, figsize=(<span class="number">12</span>, <span class="number">5</span>))</span><br><span class="line">sns.countplot(<span class="string">'Embarked'</span>, hue=<span class="string">'Sex'</span>, data=df, ax=ax[<span class="number">0</span>])</span><br><span class="line">ax[<span class="number">0</span>].set_title(<span class="string">'Male-Female Split for Embarked'</span>)</span><br><span class="line">sns.countplot(<span class="string">'Embarked'</span>, hue=<span class="string">'Pclass'</span>, data=df, ax=ax[<span class="number">1</span>])</span><br><span class="line">ax[<span class="number">1</span>].set_title(<span class="string">'Embarked vs Pclass'</span>)</span><br><span class="line">plt.subplots_adjust(wspace=<span class="number">0.2</span>, hspace=<span class="number">0.5</span>)</span><br><span class="line"></span><br><span class="line">plt.savefig(<span class="string">"../img/2019-08-15_泰坦尼克之灾_10.png"</span>)</span><br><span class="line">plt.close()</span><br></pre></td></tr></table></figure>
<p><img src="/img/2019-08-15_泰坦尼克之灾_10.png" alt></p>
<h3 id="Features-SibSip-amp-Parch"><a href="#Features-SibSip-amp-Parch" class="headerlink" title="Features: SibSip &amp; Parch"></a>Features: SibSip &amp; Parch</h3><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">f, ax = plt.subplots(<span class="number">2</span>, <span class="number">2</span>, figsize=(<span class="number">15</span>, <span class="number">10</span>))</span><br><span class="line">sns.countplot(<span class="string">'SibSp'</span>, hue=<span class="string">'Survived'</span>, data=df, ax=ax[<span class="number">0</span>, <span class="number">0</span>])</span><br><span class="line">ax[<span class="number">0</span>, <span class="number">0</span>].set_title(<span class="string">'SibSp vs Survived'</span>)</span><br><span class="line">sns.barplot(<span class="string">'SibSp'</span>, <span class="string">'Survived'</span>, data=df, ax=ax[<span class="number">0</span>, <span class="number">1</span>])</span><br><span class="line">ax[<span class="number">0</span>, <span class="number">1</span>].set_title(<span class="string">'SibSp vs Survived'</span>)</span><br><span class="line"></span><br><span class="line">sns.countplot(<span class="string">'Parch'</span>, hue=<span class="string">'Survived'</span>, data=df, ax=ax[<span class="number">1</span>, <span class="number">0</span>])</span><br><span class="line">ax[<span class="number">1</span>, <span class="number">0</span>].set_title(<span class="string">'Parch vs Survived'</span>)</span><br><span class="line">sns.barplot(<span class="string">'Parch'</span>, <span class="string">'Survived'</span>, data=df, ax=ax[<span class="number">1</span>, <span class="number">1</span>])</span><br><span class="line">ax[<span class="number">1</span>, <span class="number">1</span>].set_title(<span class="string">'Parch vs Survived'</span>)</span><br><span class="line"></span><br><span class="line">plt.subplots_adjust(wspace=<span class="number">0.2</span>, hspace=<span class="number">0.5</span>)</span><br><span class="line"></span><br><span class="line">plt.savefig(<span class="string">"../img/2019-08-15_泰坦尼克之灾_11.png"</span>)</span><br><span class="line">plt.close()</span><br></pre></td></tr></table></figure>
<p><img src="/img/2019-08-15_泰坦尼克之灾_11.png" alt></p>
<h3 id="Feature-Fare"><a href="#Feature-Fare" class="headerlink" title="Feature: Fare"></a>Feature: Fare</h3><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">f, ax = plt.subplots(<span class="number">1</span>, <span class="number">1</span>, figsize=(<span class="number">20</span>, <span class="number">5</span>))</span><br><span class="line">sns.distplot(df.Fare, ax=ax)</span><br><span class="line">ax.set_title(<span class="string">'Distribution of Fares'</span>)</span><br><span class="line"></span><br><span class="line">plt.savefig(<span class="string">"../img/2019-08-15_泰坦尼克之灾_12.png"</span>)</span><br><span class="line">plt.close()</span><br></pre></td></tr></table></figure>
<p><img src="/img/2019-08-15_泰坦尼克之灾_12.png" alt></p>
<h2 id="特征预处理"><a href="#特征预处理" class="headerlink" title="特征预处理"></a>特征预处理</h2><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">df_tuned = df.copy(deep=<span class="literal">True</span>)</span><br><span class="line">df_tuned.sample(<span class="number">5</span>)</span><br></pre></td></tr></table></figure>
<div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>PassengerId</th>
      <th>Survived</th>
      <th>Pclass</th>
      <th>Name</th>
      <th>Sex</th>
      <th>Age</th>
      <th>SibSp</th>
      <th>Parch</th>
      <th>Ticket</th>
      <th>Fare</th>
      <th>Cabin</th>
      <th>Embarked</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>390</th>
      <td>391</td>
      <td>1</td>
      <td>1</td>
      <td>Carter, Mr. William Ernest</td>
      <td>male</td>
      <td>36.0</td>
      <td>1</td>
      <td>2</td>
      <td>113760</td>
      <td>120.0000</td>
      <td>B96 B98</td>
      <td>S</td>
    </tr>
    <tr>
      <th>281</th>
      <td>282</td>
      <td>0</td>
      <td>3</td>
      <td>Olsson, Mr. Nils Johan Goransson</td>
      <td>male</td>
      <td>28.0</td>
      <td>0</td>
      <td>0</td>
      <td>347464</td>
      <td>7.8542</td>
      <td>NaN</td>
      <td>S</td>
    </tr>
    <tr>
      <th>691</th>
      <td>692</td>
      <td>1</td>
      <td>3</td>
      <td>Karun, Miss. Manca</td>
      <td>female</td>
      <td>4.0</td>
      <td>0</td>
      <td>1</td>
      <td>349256</td>
      <td>13.4167</td>
      <td>NaN</td>
      <td>C</td>
    </tr>
    <tr>
      <th>866</th>
      <td>867</td>
      <td>1</td>
      <td>2</td>
      <td>Duran y More, Miss. Asuncion</td>
      <td>female</td>
      <td>27.0</td>
      <td>1</td>
      <td>0</td>
      <td>SC/PARIS 2149</td>
      <td>13.8583</td>
      <td>NaN</td>
      <td>C</td>
    </tr>
    <tr>
      <th>726</th>
      <td>727</td>
      <td>1</td>
      <td>2</td>
      <td>Renouf, Mrs. Peter Henry (Lillian Jefferys)</td>
      <td>female</td>
      <td>30.0</td>
      <td>3</td>
      <td>0</td>
      <td>31027</td>
      <td>21.0000</td>
      <td>NaN</td>
      <td>S</td>
    </tr>
  </tbody>
</table>
</div>



<h3 id="删除无用特征"><a href="#删除无用特征" class="headerlink" title="删除无用特征"></a>删除无用特征</h3><h4 id="PassengerId"><a href="#PassengerId" class="headerlink" title="PassengerId"></a>PassengerId</h4><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">df_tuned = df_tuned.drop([<span class="string">'PassengerId'</span>], axis=<span class="number">1</span>)</span><br></pre></td></tr></table></figure>
<h3 id="填充空值"><a href="#填充空值" class="headerlink" title="填充空值"></a>填充空值</h3><h4 id="Age"><a href="#Age" class="headerlink" title="Age"></a>Age</h4><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">print(<span class="string">"原缺失值：&#123;a&#125;"</span>.format(a=df_tuned[<span class="string">'Age'</span>].isnull().sum()))</span><br><span class="line"></span><br><span class="line"><span class="comment"># 采用众数填充</span></span><br><span class="line">df_tuned[<span class="string">'Age'</span>].fillna(df_tuned[<span class="string">'Age'</span>].mode()[<span class="number">0</span>], inplace=<span class="literal">True</span>)</span><br><span class="line"></span><br><span class="line">print(<span class="string">"后缺失值：&#123;a&#125;"</span>.format(a=df_tuned[<span class="string">'Age'</span>].isnull().sum()))</span><br></pre></td></tr></table></figure>
<pre><code>原缺失值：177
后缺失值：0
</code></pre><h4 id="Cabin"><a href="#Cabin" class="headerlink" title="Cabin"></a>Cabin</h4><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">print(<span class="string">"原缺失值：&#123;a&#125;"</span>.format(a=df_tuned[<span class="string">'Cabin'</span>].isnull().sum()))</span><br><span class="line"></span><br><span class="line"><span class="comment"># 采用是否有值填充</span></span><br><span class="line">df_tuned[<span class="string">'Cabin'</span>][df_tuned[<span class="string">'Cabin'</span>].isnull()] = <span class="number">0</span></span><br><span class="line">df_tuned[<span class="string">'Cabin'</span>][df_tuned[<span class="string">'Cabin'</span>].notnull()] = <span class="number">1</span></span><br><span class="line">df_tuned[<span class="string">'Cabin'</span>] = df_tuned[<span class="string">'Cabin'</span>].astype(int)</span><br><span class="line"></span><br><span class="line">print(<span class="string">"后缺失值：&#123;a&#125;"</span>.format(a=df_tuned[<span class="string">'Cabin'</span>].isnull().sum()))</span><br></pre></td></tr></table></figure>
<pre><code>原缺失值：687
后缺失值：0
</code></pre><h4 id="Embarked"><a href="#Embarked" class="headerlink" title="Embarked"></a>Embarked</h4><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">print(<span class="string">"原缺失值：&#123;a&#125;"</span>.format(a=df_tuned[<span class="string">'Embarked'</span>].isnull().sum()))</span><br><span class="line"></span><br><span class="line"><span class="comment"># 采用众数填充</span></span><br><span class="line">df_tuned[<span class="string">'Embarked'</span>].fillna(df_tuned[<span class="string">'Embarked'</span>].mode()[<span class="number">0</span>], inplace=<span class="literal">True</span>)</span><br><span class="line"></span><br><span class="line">print(<span class="string">"后缺失值：&#123;a&#125;"</span>.format(a=df_tuned[<span class="string">'Embarked'</span>].isnull().sum()))</span><br></pre></td></tr></table></figure>
<pre><code>原缺失值：2
后缺失值：0
</code></pre><h3 id="特征分箱"><a href="#特征分箱" class="headerlink" title="特征分箱"></a>特征分箱</h3><h4 id="Name：取出称号"><a href="#Name：取出称号" class="headerlink" title="Name：取出称号"></a>Name：取出称号</h4><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">df_tuned[<span class="string">'Title'</span>] = df_tuned[<span class="string">'Name'</span>].str.extract(<span class="string">',\s(.*?)\.'</span>)</span><br></pre></td></tr></table></figure>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">title_Dict = &#123;&#125;</span><br><span class="line">title_Dict.update(dict.fromkeys([<span class="string">'Capt'</span>, <span class="string">'Col'</span>, <span class="string">'Major'</span>, <span class="string">'Dr'</span>, <span class="string">'Rev'</span>], <span class="string">'Officer'</span>))</span><br><span class="line">title_Dict.update(dict.fromkeys([<span class="string">'Jonkheer'</span>, <span class="string">'Don'</span>, <span class="string">'Sir'</span>, <span class="string">'the Countess'</span>, <span class="string">'Dona'</span>, <span class="string">'Lady'</span>], <span class="string">'Royalty'</span>))</span><br><span class="line">title_Dict.update(dict.fromkeys([<span class="string">'Mme'</span>, <span class="string">'Ms'</span>, <span class="string">'Mrs'</span>], <span class="string">'Mrs'</span>))</span><br><span class="line">title_Dict.update(dict.fromkeys([<span class="string">'Mlle'</span>, <span class="string">'Miss'</span>], <span class="string">'Miss'</span>))</span><br><span class="line">title_Dict.update(dict.fromkeys([<span class="string">'Mr'</span>], <span class="string">'Mr'</span>))</span><br><span class="line">title_Dict.update(dict.fromkeys([<span class="string">'Master'</span>], <span class="string">'Master'</span>))</span><br><span class="line"></span><br><span class="line">title_Dict</span><br></pre></td></tr></table></figure>
<pre><code>{&#39;Capt&#39;: &#39;Officer&#39;,
 &#39;Col&#39;: &#39;Officer&#39;,
 &#39;Major&#39;: &#39;Officer&#39;,
 &#39;Dr&#39;: &#39;Officer&#39;,
 &#39;Rev&#39;: &#39;Officer&#39;,
 &#39;Jonkheer&#39;: &#39;Royalty&#39;,
 &#39;Don&#39;: &#39;Royalty&#39;,
 &#39;Sir&#39;: &#39;Royalty&#39;,
 &#39;the Countess&#39;: &#39;Royalty&#39;,
 &#39;Dona&#39;: &#39;Royalty&#39;,
 &#39;Lady&#39;: &#39;Royalty&#39;,
 &#39;Mme&#39;: &#39;Mrs&#39;,
 &#39;Ms&#39;: &#39;Mrs&#39;,
 &#39;Mrs&#39;: &#39;Mrs&#39;,
 &#39;Mlle&#39;: &#39;Miss&#39;,
 &#39;Miss&#39;: &#39;Miss&#39;,
 &#39;Mr&#39;: &#39;Mr&#39;,
 &#39;Master&#39;: &#39;Master&#39;}
</code></pre><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">df_tuned[<span class="string">'Title'</span>] = df_tuned[<span class="string">'Title'</span>].map(title_Dict)</span><br><span class="line">df_tuned = df_tuned.drop([<span class="string">'Name'</span>], axis=<span class="number">1</span>)</span><br><span class="line">df_tuned.head()</span><br></pre></td></tr></table></figure>
<div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>Survived</th>
      <th>Pclass</th>
      <th>Sex</th>
      <th>Age</th>
      <th>SibSp</th>
      <th>Parch</th>
      <th>Ticket</th>
      <th>Fare</th>
      <th>Cabin</th>
      <th>Embarked</th>
      <th>Title</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>0</th>
      <td>0</td>
      <td>3</td>
      <td>male</td>
      <td>22.0</td>
      <td>1</td>
      <td>0</td>
      <td>A/5 21171</td>
      <td>7.2500</td>
      <td>1</td>
      <td>S</td>
      <td>Mr</td>
    </tr>
    <tr>
      <th>1</th>
      <td>1</td>
      <td>1</td>
      <td>female</td>
      <td>38.0</td>
      <td>1</td>
      <td>0</td>
      <td>PC 17599</td>
      <td>71.2833</td>
      <td>1</td>
      <td>C</td>
      <td>Mrs</td>
    </tr>
    <tr>
      <th>2</th>
      <td>1</td>
      <td>3</td>
      <td>female</td>
      <td>26.0</td>
      <td>0</td>
      <td>0</td>
      <td>STON/O2. 3101282</td>
      <td>7.9250</td>
      <td>1</td>
      <td>S</td>
      <td>Miss</td>
    </tr>
    <tr>
      <th>3</th>
      <td>1</td>
      <td>1</td>
      <td>female</td>
      <td>35.0</td>
      <td>1</td>
      <td>0</td>
      <td>113803</td>
      <td>53.1000</td>
      <td>1</td>
      <td>S</td>
      <td>Mrs</td>
    </tr>
    <tr>
      <th>4</th>
      <td>0</td>
      <td>3</td>
      <td>male</td>
      <td>35.0</td>
      <td>0</td>
      <td>0</td>
      <td>373450</td>
      <td>8.0500</td>
      <td>1</td>
      <td>S</td>
      <td>Mr</td>
    </tr>
  </tbody>
</table>
</div>



<h4 id="Fare"><a href="#Fare" class="headerlink" title="Fare"></a>Fare</h4><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">fare_category</span><span class="params">(fare)</span>:</span></span><br><span class="line">    <span class="keyword">if</span> fare &lt;= <span class="number">4</span>:</span><br><span class="line">        <span class="keyword">return</span> <span class="number">0</span></span><br><span class="line">    <span class="keyword">elif</span> fare &lt;= <span class="number">10</span>:</span><br><span class="line">        <span class="keyword">return</span> <span class="number">1</span></span><br><span class="line">    <span class="keyword">elif</span> fare &lt;= <span class="number">30</span>:</span><br><span class="line">        <span class="keyword">return</span> <span class="number">2</span></span><br><span class="line">    <span class="keyword">elif</span> fare &lt;= <span class="number">45</span>:</span><br><span class="line">        <span class="keyword">return</span> <span class="number">3</span></span><br><span class="line">    <span class="keyword">else</span>:</span><br><span class="line">        <span class="keyword">return</span> <span class="number">4</span></span><br><span class="line"></span><br><span class="line">df_tuned[<span class="string">'Fare'</span>] = df_tuned[<span class="string">'Fare'</span>].map(fare_category)</span><br></pre></td></tr></table></figure>
<h4 id="Family-size"><a href="#Family-size" class="headerlink" title="Family_size"></a>Family_size</h4><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">df_tuned[<span class="string">'Family_Size'</span>] = df_tuned[<span class="string">'Parch'</span>] + df_tuned[<span class="string">'SibSp'</span>] + <span class="number">1</span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">family_size_category</span><span class="params">(ppl)</span>:</span></span><br><span class="line">    <span class="keyword">if</span> ppl &lt;= <span class="number">2</span>:</span><br><span class="line">        <span class="keyword">return</span> <span class="number">0</span></span><br><span class="line">    <span class="keyword">elif</span> ppl &lt;= <span class="number">4</span>:</span><br><span class="line">        <span class="keyword">return</span> <span class="number">1</span></span><br><span class="line">    <span class="keyword">elif</span> ppl &lt;= <span class="number">6</span>:</span><br><span class="line">        <span class="keyword">return</span> <span class="number">2</span></span><br><span class="line">    <span class="keyword">else</span>:</span><br><span class="line">        <span class="keyword">return</span> <span class="number">3</span></span><br><span class="line"></span><br><span class="line">df_tuned[<span class="string">'Family_Size'</span>] = df_tuned[<span class="string">'Family_Size'</span>].map(family_size_category)</span><br></pre></td></tr></table></figure>
<h4 id="Ticket"><a href="#Ticket" class="headerlink" title="Ticket"></a>Ticket</h4><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">df_tuned[<span class="string">'Ticket'</span>] = df_tuned[<span class="string">'Ticket'</span>].str.extract(<span class="string">'(^\d+|\s\d+)'</span>)</span><br><span class="line">df_tuned[<span class="string">'Ticket'</span>].fillna(<span class="number">0</span>,inplace=<span class="literal">True</span>)</span><br><span class="line">df_tuned[<span class="string">'Ticket'</span>] = df_tuned[<span class="string">'Ticket'</span>].astype(float)</span><br></pre></td></tr></table></figure>
<h3 id="处理分类特征"><a href="#处理分类特征" class="headerlink" title="处理分类特征"></a>处理分类特征</h3><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">df_tuned</span><br></pre></td></tr></table></figure>
<div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>Survived</th>
      <th>Pclass</th>
      <th>Sex</th>
      <th>Age</th>
      <th>SibSp</th>
      <th>Parch</th>
      <th>Ticket</th>
      <th>Fare</th>
      <th>Cabin</th>
      <th>Embarked</th>
      <th>Title</th>
      <th>Family_Size</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>0</th>
      <td>0</td>
      <td>3</td>
      <td>male</td>
      <td>22.0</td>
      <td>1</td>
      <td>0</td>
      <td>21171.0</td>
      <td>1</td>
      <td>1</td>
      <td>S</td>
      <td>Mr</td>
      <td>0</td>
    </tr>
    <tr>
      <th>1</th>
      <td>1</td>
      <td>1</td>
      <td>female</td>
      <td>38.0</td>
      <td>1</td>
      <td>0</td>
      <td>17599.0</td>
      <td>4</td>
      <td>1</td>
      <td>C</td>
      <td>Mrs</td>
      <td>0</td>
    </tr>
    <tr>
      <th>2</th>
      <td>1</td>
      <td>3</td>
      <td>female</td>
      <td>26.0</td>
      <td>0</td>
      <td>0</td>
      <td>3101282.0</td>
      <td>1</td>
      <td>1</td>
      <td>S</td>
      <td>Miss</td>
      <td>0</td>
    </tr>
    <tr>
      <th>3</th>
      <td>1</td>
      <td>1</td>
      <td>female</td>
      <td>35.0</td>
      <td>1</td>
      <td>0</td>
      <td>113803.0</td>
      <td>4</td>
      <td>1</td>
      <td>S</td>
      <td>Mrs</td>
      <td>0</td>
    </tr>
    <tr>
      <th>4</th>
      <td>0</td>
      <td>3</td>
      <td>male</td>
      <td>35.0</td>
      <td>0</td>
      <td>0</td>
      <td>373450.0</td>
      <td>1</td>
      <td>1</td>
      <td>S</td>
      <td>Mr</td>
      <td>0</td>
    </tr>
    <tr>
      <th>5</th>
      <td>0</td>
      <td>3</td>
      <td>male</td>
      <td>24.0</td>
      <td>0</td>
      <td>0</td>
      <td>330877.0</td>
      <td>1</td>
      <td>1</td>
      <td>Q</td>
      <td>Mr</td>
      <td>0</td>
    </tr>
    <tr>
      <th>6</th>
      <td>0</td>
      <td>1</td>
      <td>male</td>
      <td>54.0</td>
      <td>0</td>
      <td>0</td>
      <td>17463.0</td>
      <td>4</td>
      <td>1</td>
      <td>S</td>
      <td>Mr</td>
      <td>0</td>
    </tr>
    <tr>
      <th>7</th>
      <td>0</td>
      <td>3</td>
      <td>male</td>
      <td>2.0</td>
      <td>3</td>
      <td>1</td>
      <td>349909.0</td>
      <td>2</td>
      <td>1</td>
      <td>S</td>
      <td>Master</td>
      <td>2</td>
    </tr>
    <tr>
      <th>8</th>
      <td>1</td>
      <td>3</td>
      <td>female</td>
      <td>27.0</td>
      <td>0</td>
      <td>2</td>
      <td>347742.0</td>
      <td>2</td>
      <td>1</td>
      <td>S</td>
      <td>Mrs</td>
      <td>1</td>
    </tr>
    <tr>
      <th>9</th>
      <td>1</td>
      <td>2</td>
      <td>female</td>
      <td>14.0</td>
      <td>1</td>
      <td>0</td>
      <td>237736.0</td>
      <td>3</td>
      <td>1</td>
      <td>C</td>
      <td>Mrs</td>
      <td>0</td>
    </tr>
    <tr>
      <th>10</th>
      <td>1</td>
      <td>3</td>
      <td>female</td>
      <td>4.0</td>
      <td>1</td>
      <td>1</td>
      <td>9549.0</td>
      <td>2</td>
      <td>1</td>
      <td>S</td>
      <td>Miss</td>
      <td>1</td>
    </tr>
    <tr>
      <th>11</th>
      <td>1</td>
      <td>1</td>
      <td>female</td>
      <td>58.0</td>
      <td>0</td>
      <td>0</td>
      <td>113783.0</td>
      <td>2</td>
      <td>1</td>
      <td>S</td>
      <td>Miss</td>
      <td>0</td>
    </tr>
    <tr>
      <th>12</th>
      <td>0</td>
      <td>3</td>
      <td>male</td>
      <td>20.0</td>
      <td>0</td>
      <td>0</td>
      <td>2151.0</td>
      <td>1</td>
      <td>1</td>
      <td>S</td>
      <td>Mr</td>
      <td>0</td>
    </tr>
    <tr>
      <th>13</th>
      <td>0</td>
      <td>3</td>
      <td>male</td>
      <td>39.0</td>
      <td>1</td>
      <td>5</td>
      <td>347082.0</td>
      <td>3</td>
      <td>1</td>
      <td>S</td>
      <td>Mr</td>
      <td>3</td>
    </tr>
    <tr>
      <th>14</th>
      <td>0</td>
      <td>3</td>
      <td>female</td>
      <td>14.0</td>
      <td>0</td>
      <td>0</td>
      <td>350406.0</td>
      <td>1</td>
      <td>1</td>
      <td>S</td>
      <td>Miss</td>
      <td>0</td>
    </tr>
    <tr>
      <th>15</th>
      <td>1</td>
      <td>2</td>
      <td>female</td>
      <td>55.0</td>
      <td>0</td>
      <td>0</td>
      <td>248706.0</td>
      <td>2</td>
      <td>1</td>
      <td>S</td>
      <td>Mrs</td>
      <td>0</td>
    </tr>
    <tr>
      <th>16</th>
      <td>0</td>
      <td>3</td>
      <td>male</td>
      <td>2.0</td>
      <td>4</td>
      <td>1</td>
      <td>382652.0</td>
      <td>2</td>
      <td>1</td>
      <td>Q</td>
      <td>Master</td>
      <td>2</td>
    </tr>
    <tr>
      <th>17</th>
      <td>1</td>
      <td>2</td>
      <td>male</td>
      <td>24.0</td>
      <td>0</td>
      <td>0</td>
      <td>244373.0</td>
      <td>2</td>
      <td>1</td>
      <td>S</td>
      <td>Mr</td>
      <td>0</td>
    </tr>
    <tr>
      <th>18</th>
      <td>0</td>
      <td>3</td>
      <td>female</td>
      <td>31.0</td>
      <td>1</td>
      <td>0</td>
      <td>345763.0</td>
      <td>2</td>
      <td>1</td>
      <td>S</td>
      <td>Mrs</td>
      <td>0</td>
    </tr>
    <tr>
      <th>19</th>
      <td>1</td>
      <td>3</td>
      <td>female</td>
      <td>24.0</td>
      <td>0</td>
      <td>0</td>
      <td>2649.0</td>
      <td>1</td>
      <td>1</td>
      <td>C</td>
      <td>Mrs</td>
      <td>0</td>
    </tr>
    <tr>
      <th>20</th>
      <td>0</td>
      <td>2</td>
      <td>male</td>
      <td>35.0</td>
      <td>0</td>
      <td>0</td>
      <td>239865.0</td>
      <td>2</td>
      <td>1</td>
      <td>S</td>
      <td>Mr</td>
      <td>0</td>
    </tr>
    <tr>
      <th>21</th>
      <td>1</td>
      <td>2</td>
      <td>male</td>
      <td>34.0</td>
      <td>0</td>
      <td>0</td>
      <td>248698.0</td>
      <td>2</td>
      <td>1</td>
      <td>S</td>
      <td>Mr</td>
      <td>0</td>
    </tr>
    <tr>
      <th>22</th>
      <td>1</td>
      <td>3</td>
      <td>female</td>
      <td>15.0</td>
      <td>0</td>
      <td>0</td>
      <td>330923.0</td>
      <td>1</td>
      <td>1</td>
      <td>Q</td>
      <td>Miss</td>
      <td>0</td>
    </tr>
    <tr>
      <th>23</th>
      <td>1</td>
      <td>1</td>
      <td>male</td>
      <td>28.0</td>
      <td>0</td>
      <td>0</td>
      <td>113788.0</td>
      <td>3</td>
      <td>1</td>
      <td>S</td>
      <td>Mr</td>
      <td>0</td>
    </tr>
    <tr>
      <th>24</th>
      <td>0</td>
      <td>3</td>
      <td>female</td>
      <td>8.0</td>
      <td>3</td>
      <td>1</td>
      <td>349909.0</td>
      <td>2</td>
      <td>1</td>
      <td>S</td>
      <td>Miss</td>
      <td>2</td>
    </tr>
    <tr>
      <th>25</th>
      <td>1</td>
      <td>3</td>
      <td>female</td>
      <td>38.0</td>
      <td>1</td>
      <td>5</td>
      <td>347077.0</td>
      <td>3</td>
      <td>1</td>
      <td>S</td>
      <td>Mrs</td>
      <td>3</td>
    </tr>
    <tr>
      <th>26</th>
      <td>0</td>
      <td>3</td>
      <td>male</td>
      <td>24.0</td>
      <td>0</td>
      <td>0</td>
      <td>2631.0</td>
      <td>1</td>
      <td>1</td>
      <td>C</td>
      <td>Mr</td>
      <td>0</td>
    </tr>
    <tr>
      <th>27</th>
      <td>0</td>
      <td>1</td>
      <td>male</td>
      <td>19.0</td>
      <td>3</td>
      <td>2</td>
      <td>19950.0</td>
      <td>4</td>
      <td>1</td>
      <td>S</td>
      <td>Mr</td>
      <td>2</td>
    </tr>
    <tr>
      <th>28</th>
      <td>1</td>
      <td>3</td>
      <td>female</td>
      <td>24.0</td>
      <td>0</td>
      <td>0</td>
      <td>330959.0</td>
      <td>1</td>
      <td>1</td>
      <td>Q</td>
      <td>Miss</td>
      <td>0</td>
    </tr>
    <tr>
      <th>29</th>
      <td>0</td>
      <td>3</td>
      <td>male</td>
      <td>24.0</td>
      <td>0</td>
      <td>0</td>
      <td>349216.0</td>
      <td>1</td>
      <td>1</td>
      <td>S</td>
      <td>Mr</td>
      <td>0</td>
    </tr>
    <tr>
      <th>...</th>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
    </tr>
    <tr>
      <th>861</th>
      <td>0</td>
      <td>2</td>
      <td>male</td>
      <td>21.0</td>
      <td>1</td>
      <td>0</td>
      <td>28134.0</td>
      <td>2</td>
      <td>1</td>
      <td>S</td>
      <td>Mr</td>
      <td>0</td>
    </tr>
    <tr>
      <th>862</th>
      <td>1</td>
      <td>1</td>
      <td>female</td>
      <td>48.0</td>
      <td>0</td>
      <td>0</td>
      <td>17466.0</td>
      <td>2</td>
      <td>1</td>
      <td>S</td>
      <td>Mrs</td>
      <td>0</td>
    </tr>
    <tr>
      <th>863</th>
      <td>0</td>
      <td>3</td>
      <td>female</td>
      <td>24.0</td>
      <td>8</td>
      <td>2</td>
      <td>2343.0</td>
      <td>4</td>
      <td>1</td>
      <td>S</td>
      <td>Miss</td>
      <td>3</td>
    </tr>
    <tr>
      <th>864</th>
      <td>0</td>
      <td>2</td>
      <td>male</td>
      <td>24.0</td>
      <td>0</td>
      <td>0</td>
      <td>233866.0</td>
      <td>2</td>
      <td>1</td>
      <td>S</td>
      <td>Mr</td>
      <td>0</td>
    </tr>
    <tr>
      <th>865</th>
      <td>1</td>
      <td>2</td>
      <td>female</td>
      <td>42.0</td>
      <td>0</td>
      <td>0</td>
      <td>236852.0</td>
      <td>2</td>
      <td>1</td>
      <td>S</td>
      <td>Mrs</td>
      <td>0</td>
    </tr>
    <tr>
      <th>866</th>
      <td>1</td>
      <td>2</td>
      <td>female</td>
      <td>27.0</td>
      <td>1</td>
      <td>0</td>
      <td>2149.0</td>
      <td>2</td>
      <td>1</td>
      <td>C</td>
      <td>Miss</td>
      <td>0</td>
    </tr>
    <tr>
      <th>867</th>
      <td>0</td>
      <td>1</td>
      <td>male</td>
      <td>31.0</td>
      <td>0</td>
      <td>0</td>
      <td>17590.0</td>
      <td>4</td>
      <td>1</td>
      <td>S</td>
      <td>Mr</td>
      <td>0</td>
    </tr>
    <tr>
      <th>868</th>
      <td>0</td>
      <td>3</td>
      <td>male</td>
      <td>24.0</td>
      <td>0</td>
      <td>0</td>
      <td>345777.0</td>
      <td>1</td>
      <td>1</td>
      <td>S</td>
      <td>Mr</td>
      <td>0</td>
    </tr>
    <tr>
      <th>869</th>
      <td>1</td>
      <td>3</td>
      <td>male</td>
      <td>4.0</td>
      <td>1</td>
      <td>1</td>
      <td>347742.0</td>
      <td>2</td>
      <td>1</td>
      <td>S</td>
      <td>Master</td>
      <td>1</td>
    </tr>
    <tr>
      <th>870</th>
      <td>0</td>
      <td>3</td>
      <td>male</td>
      <td>26.0</td>
      <td>0</td>
      <td>0</td>
      <td>349248.0</td>
      <td>1</td>
      <td>1</td>
      <td>S</td>
      <td>Mr</td>
      <td>0</td>
    </tr>
    <tr>
      <th>871</th>
      <td>1</td>
      <td>1</td>
      <td>female</td>
      <td>47.0</td>
      <td>1</td>
      <td>1</td>
      <td>11751.0</td>
      <td>4</td>
      <td>1</td>
      <td>S</td>
      <td>Mrs</td>
      <td>1</td>
    </tr>
    <tr>
      <th>872</th>
      <td>0</td>
      <td>1</td>
      <td>male</td>
      <td>33.0</td>
      <td>0</td>
      <td>0</td>
      <td>695.0</td>
      <td>1</td>
      <td>1</td>
      <td>S</td>
      <td>Mr</td>
      <td>0</td>
    </tr>
    <tr>
      <th>873</th>
      <td>0</td>
      <td>3</td>
      <td>male</td>
      <td>47.0</td>
      <td>0</td>
      <td>0</td>
      <td>345765.0</td>
      <td>1</td>
      <td>1</td>
      <td>S</td>
      <td>Mr</td>
      <td>0</td>
    </tr>
    <tr>
      <th>874</th>
      <td>1</td>
      <td>2</td>
      <td>female</td>
      <td>28.0</td>
      <td>1</td>
      <td>0</td>
      <td>3381.0</td>
      <td>2</td>
      <td>1</td>
      <td>C</td>
      <td>Mrs</td>
      <td>0</td>
    </tr>
    <tr>
      <th>875</th>
      <td>1</td>
      <td>3</td>
      <td>female</td>
      <td>15.0</td>
      <td>0</td>
      <td>0</td>
      <td>2667.0</td>
      <td>1</td>
      <td>1</td>
      <td>C</td>
      <td>Miss</td>
      <td>0</td>
    </tr>
    <tr>
      <th>876</th>
      <td>0</td>
      <td>3</td>
      <td>male</td>
      <td>20.0</td>
      <td>0</td>
      <td>0</td>
      <td>7534.0</td>
      <td>1</td>
      <td>1</td>
      <td>S</td>
      <td>Mr</td>
      <td>0</td>
    </tr>
    <tr>
      <th>877</th>
      <td>0</td>
      <td>3</td>
      <td>male</td>
      <td>19.0</td>
      <td>0</td>
      <td>0</td>
      <td>349212.0</td>
      <td>1</td>
      <td>1</td>
      <td>S</td>
      <td>Mr</td>
      <td>0</td>
    </tr>
    <tr>
      <th>878</th>
      <td>0</td>
      <td>3</td>
      <td>male</td>
      <td>24.0</td>
      <td>0</td>
      <td>0</td>
      <td>349217.0</td>
      <td>1</td>
      <td>1</td>
      <td>S</td>
      <td>Mr</td>
      <td>0</td>
    </tr>
    <tr>
      <th>879</th>
      <td>1</td>
      <td>1</td>
      <td>female</td>
      <td>56.0</td>
      <td>0</td>
      <td>1</td>
      <td>11767.0</td>
      <td>4</td>
      <td>1</td>
      <td>C</td>
      <td>Mrs</td>
      <td>0</td>
    </tr>
    <tr>
      <th>880</th>
      <td>1</td>
      <td>2</td>
      <td>female</td>
      <td>25.0</td>
      <td>0</td>
      <td>1</td>
      <td>230433.0</td>
      <td>2</td>
      <td>1</td>
      <td>S</td>
      <td>Mrs</td>
      <td>0</td>
    </tr>
    <tr>
      <th>881</th>
      <td>0</td>
      <td>3</td>
      <td>male</td>
      <td>33.0</td>
      <td>0</td>
      <td>0</td>
      <td>349257.0</td>
      <td>1</td>
      <td>1</td>
      <td>S</td>
      <td>Mr</td>
      <td>0</td>
    </tr>
    <tr>
      <th>882</th>
      <td>0</td>
      <td>3</td>
      <td>female</td>
      <td>22.0</td>
      <td>0</td>
      <td>0</td>
      <td>7552.0</td>
      <td>2</td>
      <td>1</td>
      <td>S</td>
      <td>Miss</td>
      <td>0</td>
    </tr>
    <tr>
      <th>883</th>
      <td>0</td>
      <td>2</td>
      <td>male</td>
      <td>28.0</td>
      <td>0</td>
      <td>0</td>
      <td>34068.0</td>
      <td>2</td>
      <td>1</td>
      <td>S</td>
      <td>Mr</td>
      <td>0</td>
    </tr>
    <tr>
      <th>884</th>
      <td>0</td>
      <td>3</td>
      <td>male</td>
      <td>25.0</td>
      <td>0</td>
      <td>0</td>
      <td>392076.0</td>
      <td>1</td>
      <td>1</td>
      <td>S</td>
      <td>Mr</td>
      <td>0</td>
    </tr>
    <tr>
      <th>885</th>
      <td>0</td>
      <td>3</td>
      <td>female</td>
      <td>39.0</td>
      <td>0</td>
      <td>5</td>
      <td>382652.0</td>
      <td>2</td>
      <td>1</td>
      <td>Q</td>
      <td>Mrs</td>
      <td>2</td>
    </tr>
    <tr>
      <th>886</th>
      <td>0</td>
      <td>2</td>
      <td>male</td>
      <td>27.0</td>
      <td>0</td>
      <td>0</td>
      <td>211536.0</td>
      <td>2</td>
      <td>1</td>
      <td>S</td>
      <td>Officer</td>
      <td>0</td>
    </tr>
    <tr>
      <th>887</th>
      <td>1</td>
      <td>1</td>
      <td>female</td>
      <td>19.0</td>
      <td>0</td>
      <td>0</td>
      <td>112053.0</td>
      <td>2</td>
      <td>1</td>
      <td>S</td>
      <td>Miss</td>
      <td>0</td>
    </tr>
    <tr>
      <th>888</th>
      <td>0</td>
      <td>3</td>
      <td>female</td>
      <td>24.0</td>
      <td>1</td>
      <td>2</td>
      <td>6607.0</td>
      <td>2</td>
      <td>1</td>
      <td>S</td>
      <td>Miss</td>
      <td>1</td>
    </tr>
    <tr>
      <th>889</th>
      <td>1</td>
      <td>1</td>
      <td>male</td>
      <td>26.0</td>
      <td>0</td>
      <td>0</td>
      <td>111369.0</td>
      <td>2</td>
      <td>1</td>
      <td>C</td>
      <td>Mr</td>
      <td>0</td>
    </tr>
    <tr>
      <th>890</th>
      <td>0</td>
      <td>3</td>
      <td>male</td>
      <td>32.0</td>
      <td>0</td>
      <td>0</td>
      <td>370376.0</td>
      <td>1</td>
      <td>1</td>
      <td>Q</td>
      <td>Mr</td>
      <td>0</td>
    </tr>
  </tbody>
</table>
<p>891 rows × 12 columns</p>
</div>



<h4 id="Embarked-Sex-Pclass-Title-Fare-Category-Family-Size"><a href="#Embarked-Sex-Pclass-Title-Fare-Category-Family-Size" class="headerlink" title="Embarked, Sex, Pclass, Title, Fare_Category, Family_Size,"></a>Embarked, Sex, Pclass, Title, Fare_Category, Family_Size,</h4><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">dummies_Pclass = pd.get_dummies(df_tuned[<span class="string">'Pclass'</span>], prefix=<span class="string">'Pclass'</span>)</span><br><span class="line">dummies_Sex = pd.get_dummies(df_tuned[<span class="string">'Sex'</span>], prefix=<span class="string">'Sex'</span>)</span><br><span class="line">dummies_Fare = pd.get_dummies(df_tuned[<span class="string">'Fare'</span>], prefix=<span class="string">'Pclass'</span>)</span><br><span class="line">dummies_Embarked = pd.get_dummies(df_tuned[<span class="string">'Embarked'</span>], prefix=<span class="string">'Embarked'</span>)</span><br><span class="line">dummies_Title = pd.get_dummies(df_tuned[<span class="string">'Title'</span>], prefix=<span class="string">'Pclass'</span>)</span><br><span class="line">dummies_Family_Size = pd.get_dummies(df_tuned[<span class="string">'Family_Size'</span>], prefix=<span class="string">'Pclass'</span>)</span><br><span class="line"></span><br><span class="line">df_tuned = pd.concat(</span><br><span class="line">    [df_tuned, dummies_Embarked, dummies_Sex, dummies_Pclass, dummies_Title, dummies_Fare, dummies_Family_Size],</span><br><span class="line">    axis=<span class="number">1</span>)</span><br><span class="line">df_tuned.drop([<span class="string">'Pclass'</span>, <span class="string">'Sex'</span>, <span class="string">'Fare'</span>, <span class="string">'Embarked'</span>, <span class="string">'Title'</span>, <span class="string">'Family_Size'</span>],</span><br><span class="line">              axis=<span class="number">1</span>,</span><br><span class="line">              inplace=<span class="literal">True</span>)</span><br></pre></td></tr></table></figure>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 最后检查</span></span><br><span class="line">df_tuned.info()</span><br></pre></td></tr></table></figure>
<pre><code>&lt;class &#39;pandas.core.frame.DataFrame&#39;&gt;
RangeIndex: 891 entries, 0 to 890
Data columns (total 29 columns):
Survived          891 non-null int64
Age               891 non-null float64
SibSp             891 non-null int64
Parch             891 non-null int64
Ticket            891 non-null float64
Cabin             891 non-null int64
Embarked_C        891 non-null uint8
Embarked_Q        891 non-null uint8
Embarked_S        891 non-null uint8
Sex_female        891 non-null uint8
Sex_male          891 non-null uint8
Pclass_1          891 non-null uint8
Pclass_2          891 non-null uint8
Pclass_3          891 non-null uint8
Pclass_Master     891 non-null uint8
Pclass_Miss       891 non-null uint8
Pclass_Mr         891 non-null uint8
Pclass_Mrs        891 non-null uint8
Pclass_Officer    891 non-null uint8
Pclass_Royalty    891 non-null uint8
Pclass_0          891 non-null uint8
Pclass_1          891 non-null uint8
Pclass_2          891 non-null uint8
Pclass_3          891 non-null uint8
Pclass_4          891 non-null uint8
Pclass_0          891 non-null uint8
Pclass_1          891 non-null uint8
Pclass_2          891 non-null uint8
Pclass_3          891 non-null uint8
dtypes: float64(2), int64(4), uint8(23)
memory usage: 61.9 KB
</code></pre><h3 id="数据标准化"><a href="#数据标准化" class="headerlink" title="数据标准化"></a>数据标准化</h3><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">from</span> sklearn.preprocessing <span class="keyword">import</span> StandardScaler</span><br><span class="line">ss = StandardScaler()</span><br><span class="line">data = ss.fit_transform(df_tuned[<span class="string">'Ticket'</span>].values.reshape(<span class="number">-1</span>, <span class="number">1</span>))</span><br><span class="line">df_tuned[<span class="string">'Ticket'</span>] = pd.DataFrame(data)</span><br></pre></td></tr></table></figure>
<h3 id="数据划分"><a href="#数据划分" class="headerlink" title="数据划分"></a>数据划分</h3><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">from</span> sklearn.model_selection <span class="keyword">import</span> train_test_split</span><br><span class="line"></span><br><span class="line">X = df_tuned[:].drop(<span class="string">"Survived"</span>, axis=<span class="number">1</span>)</span><br><span class="line">y = df_tuned[<span class="string">"Survived"</span>]</span><br><span class="line"></span><br><span class="line">X_train, X_test, y_train, y_test = train_test_split(</span><br><span class="line">    X, y, test_size=<span class="number">0.2</span>, shuffle=<span class="literal">False</span>)</span><br></pre></td></tr></table></figure>
<h2 id="数据建模"><a href="#数据建模" class="headerlink" title="数据建模"></a>数据建模</h2><h3 id="六大模型"><a href="#六大模型" class="headerlink" title="六大模型"></a>六大模型</h3><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">from</span> sklearn <span class="keyword">import</span> ensemble</span><br><span class="line"><span class="keyword">from</span> sklearn.metrics <span class="keyword">import</span> *</span><br><span class="line"><span class="keyword">from</span> sklearn.linear_model <span class="keyword">import</span> LogisticRegression</span><br><span class="line"><span class="keyword">from</span> sklearn.svm <span class="keyword">import</span> SVC</span><br><span class="line"><span class="keyword">from</span> sklearn.tree <span class="keyword">import</span> DecisionTreeClassifier</span><br><span class="line"><span class="keyword">from</span> sklearn.ensemble <span class="keyword">import</span> RandomForestClassifier, GradientBoostingClassifier</span><br><span class="line"><span class="keyword">from</span> sklearn.neighbors <span class="keyword">import</span> KNeighborsClassifier</span><br><span class="line"><span class="keyword">from</span> sklearn.model_selection <span class="keyword">import</span> cross_val_score</span><br><span class="line"></span><br><span class="line">names = [<span class="string">"LR"</span>, <span class="string">"SVC"</span>, <span class="string">'DT'</span>, <span class="string">"RF"</span>, <span class="string">"KNN"</span>, <span class="string">"GBDT"</span>, <span class="string">"Voting"</span>]</span><br><span class="line">models = [LR, svc, DT, RF, KNN, GBDT, voting]</span><br><span class="line">evaluates = [<span class="string">'accuracy'</span>, <span class="string">'precision'</span>, <span class="string">'recall'</span>, <span class="string">'f1'</span>, <span class="string">'roc_auc'</span>]</span><br><span class="line"></span><br><span class="line">LR = LogisticRegression(C=<span class="number">1.0</span>, penalty=<span class="string">'l1'</span>, tol=<span class="number">1e-6</span>)</span><br><span class="line">LR = LR.fit(X_train, y_train)</span><br><span class="line"></span><br><span class="line">svc = SVC(kernel=<span class="string">'linear'</span>, probability=<span class="literal">True</span>)</span><br><span class="line">svc = svc.fit(X_train, y_train)</span><br><span class="line"></span><br><span class="line">DT = DecisionTreeClassifier(</span><br><span class="line">    max_features=<span class="string">'sqrt'</span>, max_depth=<span class="number">35</span>, criterion=<span class="string">'entropy'</span>, random_state=<span class="number">42</span>)</span><br><span class="line">DT = DT.fit(X_train, y_train)</span><br><span class="line"></span><br><span class="line">RF = RandomForestClassifier(</span><br><span class="line">    n_estimators=<span class="number">750</span>,</span><br><span class="line">    criterion=<span class="string">'gini'</span>,</span><br><span class="line">    max_features=<span class="string">'sqrt'</span>,</span><br><span class="line">    max_depth=<span class="number">3</span>,</span><br><span class="line">    min_samples_split=<span class="number">4</span>,</span><br><span class="line">    min_samples_leaf=<span class="number">2</span>,</span><br><span class="line">    n_jobs=<span class="number">50</span>,</span><br><span class="line">    random_state=<span class="number">42</span>,</span><br><span class="line">    verbose=<span class="number">1</span>)</span><br><span class="line">RF = RF.fit(X_train, y_train)</span><br><span class="line"></span><br><span class="line">KNN = KNeighborsClassifier()</span><br><span class="line">KNN = KNN.fit(X_train, y_train)</span><br><span class="line"></span><br><span class="line">GBDT = GradientBoostingClassifier(</span><br><span class="line">    n_estimators=<span class="number">900</span>,</span><br><span class="line">    learning_rate=<span class="number">0.0008</span>,</span><br><span class="line">    loss=<span class="string">'exponential'</span>,</span><br><span class="line">    min_samples_split=<span class="number">3</span>,</span><br><span class="line">    min_samples_leaf=<span class="number">2</span>,</span><br><span class="line">    max_features=<span class="string">'sqrt'</span>,</span><br><span class="line">    max_depth=<span class="number">3</span>,</span><br><span class="line">    random_state=<span class="number">42</span>,</span><br><span class="line">    verbose=<span class="number">1</span>)</span><br><span class="line">GBDT = GBDT.fit(X_train, y_train)</span><br><span class="line"></span><br><span class="line">voting = ensemble.VotingClassifier(</span><br><span class="line">    estimators=[(<span class="string">'LR'</span>, LR), (<span class="string">'SVC'</span>, svc), (<span class="string">'DT'</span>, DT), (<span class="string">'RF'</span>, RF), (<span class="string">'KNN'</span>, KNN),</span><br><span class="line">                (<span class="string">'GBDT'</span>, GBDT)],</span><br><span class="line">    voting=<span class="string">'soft'</span>,</span><br><span class="line">    weights=[i.score(X_test, y_test) <span class="keyword">for</span> i <span class="keyword">in</span> models[<span class="number">0</span>:<span class="number">6</span>]],</span><br><span class="line">    n_jobs=<span class="number">50</span>)</span><br><span class="line">voting = voting.fit(X_train, y_train)</span><br></pre></td></tr></table></figure>
<pre><code>[Parallel(n_jobs=50)]: Using backend ThreadingBackend with 50 concurrent workers.
[Parallel(n_jobs=50)]: Done 100 tasks      | elapsed:    0.1s
[Parallel(n_jobs=50)]: Done 350 tasks      | elapsed:    0.3s
[Parallel(n_jobs=50)]: Done 750 out of 750 | elapsed:    0.5s finished


      Iter       Train Loss   Remaining Time 
         1           0.9754            1.41s
         2           0.9751            1.32s
         3           0.9748            1.24s
         4           0.9745            1.20s
         5           0.9742            1.18s
         6           0.9739            1.13s
         7           0.9738            1.08s
         8           0.9735            1.05s
         9           0.9733            1.02s
        10           0.9730            1.00s
        20           0.9703            0.77s
        30           0.9680            0.68s
        40           0.9655            0.63s
        50           0.9628            0.62s
        60           0.9602            0.59s
        70           0.9576            0.57s
        80           0.9549            0.55s
        90           0.9522            0.53s
       100           0.9498            0.52s
       200           0.9259            0.43s
       300           0.9040            0.37s
       400           0.8842            0.31s
       500           0.8660            0.26s
       600           0.8493            0.20s
       700           0.8340            0.13s
       800           0.8204            0.06s
       900           0.8078            0.00s


[Parallel(n_jobs=50)]: Using backend ThreadingBackend with 50 concurrent workers.
[Parallel(n_jobs=50)]: Done 100 tasks      | elapsed:    0.0s
[Parallel(n_jobs=50)]: Done 350 tasks      | elapsed:    0.0s
[Parallel(n_jobs=50)]: Done 750 out of 750 | elapsed:    0.1s finished
</code></pre><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br></pre></td><td class="code"><pre><span class="line">df_list = []</span><br><span class="line"><span class="keyword">for</span> name,model <span class="keyword">in</span> zip(names,models):</span><br><span class="line">    y_train_pred = model.predict(X_train)</span><br><span class="line">    y_test_pred = model.predict(X_test)</span><br><span class="line">    </span><br><span class="line">    <span class="comment">#accuracy</span></span><br><span class="line">    train_accuracy = model.score(X_train,y_train)</span><br><span class="line">    test_accuracy = model.score(X_test,y_test)</span><br><span class="line">    </span><br><span class="line">    <span class="comment">#precision   </span></span><br><span class="line">    train_precision = precision_score(y_train,y_train_pred)</span><br><span class="line">    test_precision = precision_score(y_test,y_test_pred)   </span><br><span class="line">    </span><br><span class="line">    <span class="comment">#recall</span></span><br><span class="line">    train_recall = recall_score(y_train,y_train_pred)</span><br><span class="line">    test_recall = recall_score(y_test,y_test_pred)   </span><br><span class="line">    </span><br><span class="line">    <span class="comment">#f1</span></span><br><span class="line">    train_f1 = f1_score(y_train,y_train_pred)</span><br><span class="line">    test_f1 = f1_score(y_test,y_test_pred)   </span><br><span class="line">    </span><br><span class="line">    <span class="comment">#auc</span></span><br><span class="line">    y_train_pred = model.predict_proba(X_train)[:,<span class="number">1</span>]</span><br><span class="line">    y_test_pred = model.predict_proba(X_test)[:,<span class="number">1</span>]</span><br><span class="line">    </span><br><span class="line">    train_auc = roc_auc_score(y_train,y_train_pred)</span><br><span class="line">    test_auc = roc_auc_score(y_test,y_test_pred)</span><br><span class="line">    </span><br><span class="line">    df = pd.DataFrame(np.array([train_accuracy,train_precision,train_recall,train_f1,train_auc,test_accuracy,test_precision,test_recall,test_f1,test_auc]).reshape(<span class="number">2</span>,<span class="number">-1</span>),</span><br><span class="line">                  index = [<span class="string">'train'</span>,<span class="string">'test'</span>],</span><br><span class="line">                  columns = [<span class="string">'Accuracy'</span>,<span class="string">'Precision'</span>,<span class="string">'Recall'</span>,<span class="string">'F1-Score'</span>,<span class="string">'AUC-Score'</span>])</span><br><span class="line">    df_list.append(df)</span><br><span class="line"></span><br><span class="line">pd.concat(df_list,axis=<span class="number">0</span>,keys=names)</span><br></pre></td></tr></table></figure>
<pre><code>[Parallel(n_jobs=50)]: Using backend ThreadingBackend with 50 concurrent workers.
[Parallel(n_jobs=50)]: Done 100 tasks      | elapsed:    0.0s
[Parallel(n_jobs=50)]: Done 350 tasks      | elapsed:    0.1s
[Parallel(n_jobs=50)]: Done 750 out of 750 | elapsed:    0.2s finished
[Parallel(n_jobs=50)]: Using backend ThreadingBackend with 50 concurrent workers.
[Parallel(n_jobs=50)]: Done 100 tasks      | elapsed:    0.0s
[Parallel(n_jobs=50)]: Done 350 tasks      | elapsed:    0.1s
[Parallel(n_jobs=50)]: Done 750 out of 750 | elapsed:    0.1s finished
[Parallel(n_jobs=50)]: Using backend ThreadingBackend with 50 concurrent workers.
[Parallel(n_jobs=50)]: Done 100 tasks      | elapsed:    0.0s
[Parallel(n_jobs=50)]: Done 350 tasks      | elapsed:    0.1s
[Parallel(n_jobs=50)]: Done 750 out of 750 | elapsed:    0.2s finished
[Parallel(n_jobs=50)]: Using backend ThreadingBackend with 50 concurrent workers.
[Parallel(n_jobs=50)]: Done 100 tasks      | elapsed:    0.0s
[Parallel(n_jobs=50)]: Done 350 tasks      | elapsed:    0.1s
[Parallel(n_jobs=50)]: Done 750 out of 750 | elapsed:    0.1s finished
[Parallel(n_jobs=50)]: Using backend ThreadingBackend with 50 concurrent workers.
[Parallel(n_jobs=50)]: Done 100 tasks      | elapsed:    0.0s
[Parallel(n_jobs=50)]: Done 350 tasks      | elapsed:    0.1s
[Parallel(n_jobs=50)]: Done 750 out of 750 | elapsed:    0.2s finished
[Parallel(n_jobs=50)]: Using backend ThreadingBackend with 50 concurrent workers.
[Parallel(n_jobs=50)]: Done 100 tasks      | elapsed:    0.0s
[Parallel(n_jobs=50)]: Done 350 tasks      | elapsed:    0.1s
[Parallel(n_jobs=50)]: Done 750 out of 750 | elapsed:    0.1s finished
[Parallel(n_jobs=50)]: Using backend ThreadingBackend with 50 concurrent workers.
[Parallel(n_jobs=50)]: Done 100 tasks      | elapsed:    0.0s
[Parallel(n_jobs=50)]: Done 350 tasks      | elapsed:    0.1s
[Parallel(n_jobs=50)]: Done 750 out of 750 | elapsed:    0.2s finished
[Parallel(n_jobs=50)]: Using backend ThreadingBackend with 50 concurrent workers.
[Parallel(n_jobs=50)]: Done 100 tasks      | elapsed:    0.0s
[Parallel(n_jobs=50)]: Done 350 tasks      | elapsed:    0.1s
[Parallel(n_jobs=50)]: Done 750 out of 750 | elapsed:    0.1s finished
[Parallel(n_jobs=50)]: Using backend ThreadingBackend with 50 concurrent workers.
[Parallel(n_jobs=50)]: Done 100 tasks      | elapsed:    0.0s
[Parallel(n_jobs=50)]: Done 350 tasks      | elapsed:    0.1s
[Parallel(n_jobs=50)]: Done 750 out of 750 | elapsed:    0.2s finished
[Parallel(n_jobs=50)]: Using backend ThreadingBackend with 50 concurrent workers.
[Parallel(n_jobs=50)]: Done 100 tasks      | elapsed:    0.0s
[Parallel(n_jobs=50)]: Done 350 tasks      | elapsed:    0.0s
[Parallel(n_jobs=50)]: Done 750 out of 750 | elapsed:    0.1s finished
[Parallel(n_jobs=50)]: Using backend ThreadingBackend with 50 concurrent workers.
[Parallel(n_jobs=50)]: Done 100 tasks      | elapsed:    0.0s
[Parallel(n_jobs=50)]: Done 350 tasks      | elapsed:    0.1s
[Parallel(n_jobs=50)]: Done 750 out of 750 | elapsed:    0.1s finished
[Parallel(n_jobs=50)]: Using backend ThreadingBackend with 50 concurrent workers.
[Parallel(n_jobs=50)]: Done 100 tasks      | elapsed:    0.0s
[Parallel(n_jobs=50)]: Done 350 tasks      | elapsed:    0.0s
[Parallel(n_jobs=50)]: Done 750 out of 750 | elapsed:    0.1s finished
</code></pre><div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th></th>
      <th>Accuracy</th>
      <th>Precision</th>
      <th>Recall</th>
      <th>F1-Score</th>
      <th>AUC-Score</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th rowspan="2" valign="top">LR</th>
      <th>train</th>
      <td>0.817416</td>
      <td>0.791339</td>
      <td>0.723022</td>
      <td>0.755639</td>
      <td>0.873811</td>
    </tr>
    <tr>
      <th>test</th>
      <td>0.860335</td>
      <td>0.819672</td>
      <td>0.781250</td>
      <td>0.800000</td>
      <td>0.912772</td>
    </tr>
    <tr>
      <th rowspan="2" valign="top">SVC</th>
      <th>train</th>
      <td>0.820225</td>
      <td>0.804878</td>
      <td>0.712230</td>
      <td>0.755725</td>
      <td>0.860508</td>
    </tr>
    <tr>
      <th>test</th>
      <td>0.854749</td>
      <td>0.816667</td>
      <td>0.765625</td>
      <td>0.790323</td>
      <td>0.899321</td>
    </tr>
    <tr>
      <th rowspan="2" valign="top">DT</th>
      <th>train</th>
      <td>0.998596</td>
      <td>1.000000</td>
      <td>0.996403</td>
      <td>0.998198</td>
      <td>0.999992</td>
    </tr>
    <tr>
      <th>test</th>
      <td>0.754190</td>
      <td>0.642857</td>
      <td>0.703125</td>
      <td>0.671642</td>
      <td>0.748981</td>
    </tr>
    <tr>
      <th rowspan="2" valign="top">RF</th>
      <th>train</th>
      <td>0.817416</td>
      <td>0.803279</td>
      <td>0.705036</td>
      <td>0.750958</td>
      <td>0.872949</td>
    </tr>
    <tr>
      <th>test</th>
      <td>0.843575</td>
      <td>0.810345</td>
      <td>0.734375</td>
      <td>0.770492</td>
      <td>0.895856</td>
    </tr>
    <tr>
      <th rowspan="2" valign="top">KNN</th>
      <th>train</th>
      <td>0.841292</td>
      <td>0.839506</td>
      <td>0.733813</td>
      <td>0.783109</td>
      <td>0.918315</td>
    </tr>
    <tr>
      <th>test</th>
      <td>0.821229</td>
      <td>0.758065</td>
      <td>0.734375</td>
      <td>0.746032</td>
      <td>0.852921</td>
    </tr>
    <tr>
      <th rowspan="2" valign="top">GBDT</th>
      <th>train</th>
      <td>0.818820</td>
      <td>0.898396</td>
      <td>0.604317</td>
      <td>0.722581</td>
      <td>0.881597</td>
    </tr>
    <tr>
      <th>test</th>
      <td>0.843575</td>
      <td>0.909091</td>
      <td>0.625000</td>
      <td>0.740741</td>
      <td>0.904823</td>
    </tr>
    <tr>
      <th rowspan="2" valign="top">Voting</th>
      <th>train</th>
      <td>0.856742</td>
      <td>0.872881</td>
      <td>0.741007</td>
      <td>0.801556</td>
      <td>0.971074</td>
    </tr>
    <tr>
      <th>test</th>
      <td>0.860335</td>
      <td>0.830508</td>
      <td>0.765625</td>
      <td>0.796748</td>
      <td>0.898505</td>
    </tr>
  </tbody>
</table>
</div>



<h3 id="数据预测"><a href="#数据预测" class="headerlink" title="数据预测"></a>数据预测</h3><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br></pre></td><td class="code"><pre><span class="line">df_test = pd.read_csv(<span class="string">"2019-08-15_泰坦尼克之灾_test.csv"</span>)</span><br><span class="line">df_tuned_test = df_test.copy(deep=<span class="literal">True</span>)</span><br><span class="line"></span><br><span class="line">df_tuned_test = df_tuned_test.drop([<span class="string">'PassengerId'</span>], axis=<span class="number">1</span>)</span><br><span class="line">df_tuned_test[<span class="string">'Age'</span>].fillna(df_tuned_test[<span class="string">'Age'</span>].mode()[<span class="number">0</span>], inplace=<span class="literal">True</span>)</span><br><span class="line">df_tuned_test[<span class="string">'Cabin'</span>][df_tuned_test[<span class="string">'Cabin'</span>].isnull()] = <span class="number">0</span></span><br><span class="line">df_tuned_test[<span class="string">'Cabin'</span>][df_tuned_test[<span class="string">'Cabin'</span>].notnull()] = <span class="number">1</span></span><br><span class="line">df_tuned_test[<span class="string">'Cabin'</span>] = df_tuned_test[<span class="string">'Cabin'</span>].astype(int)</span><br><span class="line">df_tuned_test[<span class="string">'Embarked'</span>].fillna(</span><br><span class="line">    df_tuned_test[<span class="string">'Embarked'</span>].mode()[<span class="number">0</span>], inplace=<span class="literal">True</span>)</span><br><span class="line">df_tuned_test[<span class="string">'Title'</span>] = df_tuned_test[<span class="string">'Name'</span>].str.extract(<span class="string">',\s(.*?)\.'</span>)</span><br><span class="line">df_tuned_test[<span class="string">'Title'</span>] = df_tuned_test[<span class="string">'Title'</span>].map(title_Dict)</span><br><span class="line">df_tuned_test = df_tuned_test.drop([<span class="string">'Name'</span>], axis=<span class="number">1</span>)</span><br><span class="line">df_tuned_test[<span class="string">'Fare'</span>] = df_tuned_test[<span class="string">'Fare'</span>].map(fare_category)</span><br><span class="line">df_tuned_test[</span><br><span class="line">    <span class="string">'Family_Size'</span>] = df_tuned_test[<span class="string">'Parch'</span>] + df_tuned_test[<span class="string">'SibSp'</span>] + <span class="number">1</span></span><br><span class="line"></span><br><span class="line">df_tuned_test[<span class="string">'Family_Size'</span>] = df_tuned_test[<span class="string">'Family_Size'</span>].map(</span><br><span class="line">    family_size_category)</span><br><span class="line"></span><br><span class="line">df_tuned_test[<span class="string">'Ticket'</span>] = df_tuned_test[<span class="string">'Ticket'</span>].str.extract(<span class="string">'(^\d+|\s\d+)'</span>)</span><br><span class="line">df_tuned_test[<span class="string">'Ticket'</span>].fillna(<span class="number">0</span>, inplace=<span class="literal">True</span>)</span><br><span class="line">df_tuned_test[<span class="string">'Ticket'</span>] = df_tuned_test[<span class="string">'Ticket'</span>].astype(float)</span><br><span class="line"></span><br><span class="line">dummies_Pclass = pd.get_dummies(df_tuned_test[<span class="string">'Pclass'</span>], prefix=<span class="string">'Pclass'</span>)</span><br><span class="line">dummies_Sex = pd.get_dummies(df_tuned_test[<span class="string">'Sex'</span>], prefix=<span class="string">'Sex'</span>)</span><br><span class="line">dummies_Fare = pd.get_dummies(df_tuned_test[<span class="string">'Fare'</span>], prefix=<span class="string">'Pclass'</span>)</span><br><span class="line">dummies_Embarked = pd.get_dummies(df_tuned_test[<span class="string">'Embarked'</span>], prefix=<span class="string">'Embarked'</span>)</span><br><span class="line">dummies_Title = pd.get_dummies(df_tuned_test[<span class="string">'Title'</span>], prefix=<span class="string">'Pclass'</span>)</span><br><span class="line">dummies_Family_Size = pd.get_dummies(</span><br><span class="line">    df_tuned_test[<span class="string">'Family_Size'</span>], prefix=<span class="string">'Pclass'</span>)</span><br><span class="line"></span><br><span class="line">df_tuned_test = pd.concat([</span><br><span class="line">    df_tuned_test, dummies_Embarked, dummies_Sex, dummies_Pclass,</span><br><span class="line">    dummies_Title, dummies_Fare, dummies_Family_Size</span><br><span class="line">],</span><br><span class="line">                          axis=<span class="number">1</span>)</span><br><span class="line">df_tuned_test.drop(</span><br><span class="line">    [<span class="string">'Pclass'</span>, <span class="string">'Sex'</span>, <span class="string">'Fare'</span>, <span class="string">'Embarked'</span>, <span class="string">'Title'</span>, <span class="string">'Family_Size'</span>],</span><br><span class="line">    axis=<span class="number">1</span>,</span><br><span class="line">    inplace=<span class="literal">True</span>)</span><br><span class="line"></span><br><span class="line">data = ss.fit_transform(df_tuned_test[<span class="string">'Ticket'</span>].values.reshape(<span class="number">-1</span>, <span class="number">1</span>))</span><br><span class="line">df_tuned_test[<span class="string">'Ticket'</span>] = pd.DataFrame(data)</span><br></pre></td></tr></table></figure>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">predictions = voting.predict(df_tuned_test)</span><br><span class="line">result = pd.DataFrame(&#123;</span><br><span class="line">    <span class="string">'PassengerId'</span>: df_test[<span class="string">'PassengerId'</span>].as_matrix(),</span><br><span class="line">    <span class="string">'Survived'</span>: predictions.astype(np.int32)</span><br><span class="line">&#125;)</span><br><span class="line">result.to_csv(<span class="string">"2019-08-15_泰坦尼克之灾_predictions.csv"</span>, index=<span class="literal">False</span>)</span><br></pre></td></tr></table></figure>
<pre><code>[Parallel(n_jobs=50)]: Using backend ThreadingBackend with 50 concurrent workers.
[Parallel(n_jobs=50)]: Done 100 tasks      | elapsed:    0.1s
[Parallel(n_jobs=50)]: Done 350 tasks      | elapsed:    0.1s
[Parallel(n_jobs=50)]: Done 750 out of 750 | elapsed:    0.2s finished
</code></pre><blockquote>
<p>参考：</p>
</blockquote>
<ol>
<li><a href="https://blog.csdn.net/m0_37725003/article/details/81095555" target="_blank" rel="noopener">集成学习voting Classifier在sklearn中的实现</a></li>
<li><a href="https://zhuanlan.zhihu.com/p/30538352" target="_blank" rel="noopener">Kaggle泰坦尼克号生存模型——250个特征量的融合模型，排名8%</a></li>
<li><a href="https://kaggle.com/vikumsw/basic-feature-visualizations" target="_blank" rel="noopener">Basic Feature Visualizations</a></li>
</ol>

      
    </div>

    
      


    

    
    
    

    

    
      
    
    

    

    <footer class="post-footer">
      

      
      
      

      
        <div class="post-nav">
          <div class="post-nav-next post-nav-item">
            
              <a href="/人工智能/基础概念/2828/" rel="next" title="网格搜寻">
                <i class="fa fa-chevron-left"></i> 网格搜寻
              </a>
            
          </div>

          <span class="post-nav-divider"></span>

          <div class="post-nav-prev post-nav-item">
            
              <a href="/人工智能/监督学习/45240/" rel="prev" title="集成学习（以随机森林与adaboosting为例）">
                集成学习（以随机森林与adaboosting为例） <i class="fa fa-chevron-right"></i>
              </a>
            
          </div>
        </div>
      

      
      
    </footer>
  </div>
  
  
  
  </article>


  </div>


          </div>
          

  
    <div class="comments" id="comments">
      <div id="lv-container" data-id="city" data-uid="MTAyMC80NDg0NS8yMTM2Ng=="></div>
    </div>

  



        </div>
        
          
  
  <div class="sidebar-toggle">
    <div class="sidebar-toggle-line-wrap">
      <span class="sidebar-toggle-line sidebar-toggle-line-first"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-middle"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-last"></span>
    </div>
  </div>

  <aside id="sidebar" class="sidebar">
    <div class="sidebar-inner">

      

      
        <ul class="sidebar-nav motion-element">
          <li class="sidebar-nav-toc sidebar-nav-active" data-target="post-toc-wrap">
            Table of Contents
          </li>
          <li class="sidebar-nav-overview" data-target="site-overview-wrap">
            Overview
          </li>
        </ul>
      

      <div class="site-overview-wrap sidebar-panel">
        <div class="site-overview">
          <div class="site-author motion-element" itemprop="author" itemscope itemtype="http://schema.org/Person">
            
              <img class="site-author-image" itemprop="image" src="/images/avatar.gif" alt="Dan">
            
              <p class="site-author-name" itemprop="name">Dan</p>
              <div class="site-description motion-element" itemprop="description"></div>
          </div>

          
            <nav class="site-state motion-element">
              
                <div class="site-state-item site-state-posts">
                
                  <a href="/archives/">
                
                    <span class="site-state-item-count">21</span>
                    <span class="site-state-item-name">posts</span>
                  </a>
                </div>
              

              
                
                
                <div class="site-state-item site-state-categories">
                  
                    
                      <a href="/categories/">
                    
                  
                    
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                    <span class="site-state-item-count">19</span>
                    <span class="site-state-item-name">categories</span>
                  </a>
                </div>
              

              
            </nav>
          

          

          

          
            <div class="links-of-author motion-element">
              
                <span class="links-of-author-item">
                  
                  
                  
                    
                  
                  <a href="https://github.com/daniel18qzx" title="GitHub &rarr; https://github.com/daniel18qzx" rel="noopener" target="_blank"><i class="fa fa-fw fa-github"></i></a>
                </span>
              
                <span class="links-of-author-item">
                  
                  
                  
                    
                  
                  <a href="https://www.linkedin.com/in/danielchiu15/" title="Linkedin &rarr; https://www.linkedin.com/in/danielchiu15/" rel="noopener" target="_blank"><i class="fa fa-fw fa-linkedin"></i></a>
                </span>
              
            </div>
          

          

          
          

          
            
          
          

        </div>
      </div>

      
      <!--noindex-->
        <div class="post-toc-wrap motion-element sidebar-panel sidebar-panel-active">
          <div class="post-toc">

            
            
            
            

            
              <div class="post-toc-content"><ol class="nav"><li class="nav-item nav-level-2"><a class="nav-link" href="#数据集载入"><span class="nav-number">1.</span> <span class="nav-text">数据集载入</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#数据探索"><span class="nav-number">2.</span> <span class="nav-text">数据探索</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#察看空值分布"><span class="nav-number">2.1.</span> <span class="nav-text">察看空值分布</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#Column-Survival"><span class="nav-number">2.2.</span> <span class="nav-text">Column : Survival</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#Feature-Sex"><span class="nav-number">2.3.</span> <span class="nav-text">Feature: Sex</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#Feature-Pclass"><span class="nav-number">2.4.</span> <span class="nav-text">Feature: Pclass</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#Feature-Age"><span class="nav-number">2.5.</span> <span class="nav-text">Feature: Age</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#Feature-Embarked"><span class="nav-number">2.6.</span> <span class="nav-text">Feature: Embarked</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#Features-SibSip-amp-Parch"><span class="nav-number">2.7.</span> <span class="nav-text">Features: SibSip &amp; Parch</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#Feature-Fare"><span class="nav-number">2.8.</span> <span class="nav-text">Feature: Fare</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#特征预处理"><span class="nav-number">3.</span> <span class="nav-text">特征预处理</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#删除无用特征"><span class="nav-number">3.1.</span> <span class="nav-text">删除无用特征</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#PassengerId"><span class="nav-number">3.1.1.</span> <span class="nav-text">PassengerId</span></a></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#填充空值"><span class="nav-number">3.2.</span> <span class="nav-text">填充空值</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#Age"><span class="nav-number">3.2.1.</span> <span class="nav-text">Age</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#Cabin"><span class="nav-number">3.2.2.</span> <span class="nav-text">Cabin</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#Embarked"><span class="nav-number">3.2.3.</span> <span class="nav-text">Embarked</span></a></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#特征分箱"><span class="nav-number">3.3.</span> <span class="nav-text">特征分箱</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#Name：取出称号"><span class="nav-number">3.3.1.</span> <span class="nav-text">Name：取出称号</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#Fare"><span class="nav-number">3.3.2.</span> <span class="nav-text">Fare</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#Family-size"><span class="nav-number">3.3.3.</span> <span class="nav-text">Family_size</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#Ticket"><span class="nav-number">3.3.4.</span> <span class="nav-text">Ticket</span></a></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#处理分类特征"><span class="nav-number">3.4.</span> <span class="nav-text">处理分类特征</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#Embarked-Sex-Pclass-Title-Fare-Category-Family-Size"><span class="nav-number">3.4.1.</span> <span class="nav-text">Embarked, Sex, Pclass, Title, Fare_Category, Family_Size,</span></a></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#数据标准化"><span class="nav-number">3.5.</span> <span class="nav-text">数据标准化</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#数据划分"><span class="nav-number">3.6.</span> <span class="nav-text">数据划分</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#数据建模"><span class="nav-number">4.</span> <span class="nav-text">数据建模</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#六大模型"><span class="nav-number">4.1.</span> <span class="nav-text">六大模型</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#数据预测"><span class="nav-number">4.2.</span> <span class="nav-text">数据预测</span></a></li></ol></li></ol></div>
            

          </div>
        </div>
      <!--/noindex-->
      

      
        <div class="back-to-top">
          <i class="fa fa-arrow-up"></i>
          
            <span id="scrollpercent"><span>0</span>%</span>
          
        </div>
      

    </div>
  </aside>
  


        
      </div>
    </main>

    <footer id="footer" class="footer">
      <div class="footer-inner">
        <div class="copyright">&copy; <span itemprop="copyrightYear">2019</span>
  <span class="with-love" id="animate">
    <i class="fa fa-user"></i>
  </span>
  <span class="author" itemprop="copyrightHolder">Daniel Chiu. All Rights Reserved.</span>

  

  
</div>


  <div class="powered-by">Powered by <a href="https://hexo.io" class="theme-link" rel="noopener" target="_blank">Hexo</a> v3.9.0</div>



  <span class="post-meta-divider">|</span>



  <div class="theme-info">Theme – <a href="https://theme-next.org" class="theme-link" rel="noopener" target="_blank">NexT.Gemini</a> v7.1.2</div>




        
<div class="busuanzi-count">
  <script async src="https://busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script>

  
    <span class="post-meta-item-icon">
      <i class="fa fa-user"></i>
    </span>
    <span class="site-uv" title="Total Visitors">
      <span class="busuanzi-value" id="busuanzi_value_site_uv"></span>
    </span>
  

  
    <span class="post-meta-divider">|</span>
  

  
    <span class="post-meta-item-icon">
      <i class="fa fa-eye"></i>
    </span>
    <span class="site-pv" title="Total Views">
      <span class="busuanzi-value" id="busuanzi_value_site_pv"></span>
    </span>
  
</div>









        
      </div>
    </footer>

    

    

    

    
  </div>

  

<script>
  if (Object.prototype.toString.call(window.Promise) !== '[object Function]') {
    window.Promise = null;
  }
</script>


























  
  <script src="/lib/jquery/index.js?v=3.4.1"></script>

  
  <script src="/lib/velocity/velocity.min.js?v=1.2.1"></script>

  
  <script src="/lib/velocity/velocity.ui.min.js?v=1.2.1"></script>


  


  <script src="/js/utils.js?v=7.1.2"></script>

  <script src="/js/motion.js?v=7.1.2"></script>



  
  


  <script src="/js/affix.js?v=7.1.2"></script>

  <script src="/js/schemes/pisces.js?v=7.1.2"></script>




  
  <script src="/js/scrollspy.js?v=7.1.2"></script>
<script src="/js/post-details.js?v=7.1.2"></script>



  


  <script src="/js/next-boot.js?v=7.1.2"></script>


  

  

  

  


  
    <script>
  window.livereOptions = {
    refer: '人工智能/项目/12954/'
  };
  (function(d, s) {
    var j, e = d.getElementsByTagName(s)[0];
    if (typeof LivereTower === 'function') { return; }
    j = d.createElement(s);
    j.src = 'https://cdn-city.livere.com/js/embed.dist.js';
    j.async = true;
    e.parentNode.insertBefore(j, e);
  })(document, 'script');
</script>

  


  
  <script>
    // Popup Window;
    var isfetched = false;
    var isXml = true;
    // Search DB path;
    var search_path = "search.xml";
    if (search_path.length === 0) {
      search_path = "search.xml";
    } else if (/json$/i.test(search_path)) {
      isXml = false;
    }
    var path = "/" + search_path;
    // monitor main search box;

    var onPopupClose = function (e) {
      $('.popup').hide();
      $('#local-search-input').val('');
      $('.search-result-list').remove();
      $('#no-result').remove();
      $(".local-search-pop-overlay").remove();
      $('body').css('overflow', '');
    }

    function proceedsearch() {
      $("body")
        .append('<div class="search-popup-overlay local-search-pop-overlay"></div>')
        .css('overflow', 'hidden');
      $('.search-popup-overlay').click(onPopupClose);
      $('.popup').toggle();
      var $localSearchInput = $('#local-search-input');
      $localSearchInput.attr("autocapitalize", "none");
      $localSearchInput.attr("autocorrect", "off");
      $localSearchInput.focus();
    }

    // search function;
    var searchFunc = function(path, search_id, content_id) {
      'use strict';

      // start loading animation
      $("body")
        .append('<div class="search-popup-overlay local-search-pop-overlay">' +
          '<div id="search-loading-icon">' +
          '<i class="fa fa-spinner fa-pulse fa-5x fa-fw"></i>' +
          '</div>' +
          '</div>')
        .css('overflow', 'hidden');
      $("#search-loading-icon").css('margin', '20% auto 0 auto').css('text-align', 'center');

      

      $.ajax({
        url: path,
        dataType: isXml ? "xml" : "json",
        async: true,
        success: function(res) {
          // get the contents from search data
          isfetched = true;
          $('.popup').detach().appendTo('.header-inner');
          var datas = isXml ? $("entry", res).map(function() {
            return {
              title: $("title", this).text(),
              content: $("content",this).text(),
              url: $("url" , this).text()
            };
          }).get() : res;
          var input = document.getElementById(search_id);
          var resultContent = document.getElementById(content_id);
          var inputEventFunction = function() {
            var searchText = input.value.trim().toLowerCase();
            var keywords = searchText.split(/[\s\-]+/);
            if (keywords.length > 1) {
              keywords.push(searchText);
            }
            var resultItems = [];
            if (searchText.length > 0) {
              // perform local searching
              datas.forEach(function(data) {
                var isMatch = false;
                var hitCount = 0;
                var searchTextCount = 0;
                var title = data.title.trim();
                var titleInLowerCase = title.toLowerCase();
                var content = data.content.trim().replace(/<[^>]+>/g,"");
                
                var contentInLowerCase = content.toLowerCase();
                var articleUrl = decodeURIComponent(data.url).replace(/\/{2,}/g, '/');
                var indexOfTitle = [];
                var indexOfContent = [];
                // only match articles with not empty titles
                if(title != '') {
                  keywords.forEach(function(keyword) {
                    function getIndexByWord(word, text, caseSensitive) {
                      var wordLen = word.length;
                      if (wordLen === 0) {
                        return [];
                      }
                      var startPosition = 0, position = [], index = [];
                      if (!caseSensitive) {
                        text = text.toLowerCase();
                        word = word.toLowerCase();
                      }
                      while ((position = text.indexOf(word, startPosition)) > -1) {
                        index.push({position: position, word: word});
                        startPosition = position + wordLen;
                      }
                      return index;
                    }

                    indexOfTitle = indexOfTitle.concat(getIndexByWord(keyword, titleInLowerCase, false));
                    indexOfContent = indexOfContent.concat(getIndexByWord(keyword, contentInLowerCase, false));
                  });
                  if (indexOfTitle.length > 0 || indexOfContent.length > 0) {
                    isMatch = true;
                    hitCount = indexOfTitle.length + indexOfContent.length;
                  }
                }

                // show search results

                if (isMatch) {
                  // sort index by position of keyword

                  [indexOfTitle, indexOfContent].forEach(function (index) {
                    index.sort(function (itemLeft, itemRight) {
                      if (itemRight.position !== itemLeft.position) {
                        return itemRight.position - itemLeft.position;
                      } else {
                        return itemLeft.word.length - itemRight.word.length;
                      }
                    });
                  });

                  // merge hits into slices

                  function mergeIntoSlice(text, start, end, index) {
                    var item = index[index.length - 1];
                    var position = item.position;
                    var word = item.word;
                    var hits = [];
                    var searchTextCountInSlice = 0;
                    while (position + word.length <= end && index.length != 0) {
                      if (word === searchText) {
                        searchTextCountInSlice++;
                      }
                      hits.push({position: position, length: word.length});
                      var wordEnd = position + word.length;

                      // move to next position of hit

                      index.pop();
                      while (index.length != 0) {
                        item = index[index.length - 1];
                        position = item.position;
                        word = item.word;
                        if (wordEnd > position) {
                          index.pop();
                        } else {
                          break;
                        }
                      }
                    }
                    searchTextCount += searchTextCountInSlice;
                    return {
                      hits: hits,
                      start: start,
                      end: end,
                      searchTextCount: searchTextCountInSlice
                    };
                  }

                  var slicesOfTitle = [];
                  if (indexOfTitle.length != 0) {
                    slicesOfTitle.push(mergeIntoSlice(title, 0, title.length, indexOfTitle));
                  }

                  var slicesOfContent = [];
                  while (indexOfContent.length != 0) {
                    var item = indexOfContent[indexOfContent.length - 1];
                    var position = item.position;
                    var word = item.word;
                    // cut out 100 characters
                    var start = position - 20;
                    var end = position + 80;
                    if(start < 0){
                      start = 0;
                    }
                    if (end < position + word.length) {
                      end = position + word.length;
                    }
                    if(end > content.length){
                      end = content.length;
                    }
                    slicesOfContent.push(mergeIntoSlice(content, start, end, indexOfContent));
                  }

                  // sort slices in content by search text's count and hits' count

                  slicesOfContent.sort(function (sliceLeft, sliceRight) {
                    if (sliceLeft.searchTextCount !== sliceRight.searchTextCount) {
                      return sliceRight.searchTextCount - sliceLeft.searchTextCount;
                    } else if (sliceLeft.hits.length !== sliceRight.hits.length) {
                      return sliceRight.hits.length - sliceLeft.hits.length;
                    } else {
                      return sliceLeft.start - sliceRight.start;
                    }
                  });

                  // select top N slices in content

                  var upperBound = parseInt('1');
                  if (upperBound >= 0) {
                    slicesOfContent = slicesOfContent.slice(0, upperBound);
                  }

                  // highlight title and content

                  function highlightKeyword(text, slice) {
                    var result = '';
                    var prevEnd = slice.start;
                    slice.hits.forEach(function (hit) {
                      result += text.substring(prevEnd, hit.position);
                      var end = hit.position + hit.length;
                      result += '<b class="search-keyword">' + text.substring(hit.position, end) + '</b>';
                      prevEnd = end;
                    });
                    result += text.substring(prevEnd, slice.end);
                    return result;
                  }

                  var resultItem = '';

                  if (slicesOfTitle.length != 0) {
                    resultItem += "<li><a href='" + articleUrl + "' class='search-result-title'>" + highlightKeyword(title, slicesOfTitle[0]) + "</a>";
                  } else {
                    resultItem += "<li><a href='" + articleUrl + "' class='search-result-title'>" + title + "</a>";
                  }

                  slicesOfContent.forEach(function (slice) {
                    resultItem += "<a href='" + articleUrl + "'>" +
                      "<p class=\"search-result\">" + highlightKeyword(content, slice) +
                      "...</p>" + "</a>";
                  });

                  resultItem += "</li>";
                  resultItems.push({
                    item: resultItem,
                    searchTextCount: searchTextCount,
                    hitCount: hitCount,
                    id: resultItems.length
                  });
                }
              })
            };
            if (keywords.length === 1 && keywords[0] === "") {
              resultContent.innerHTML = '<div id="no-result"><i class="fa fa-search fa-5x"></i></div>'
            } else if (resultItems.length === 0) {
              resultContent.innerHTML = '<div id="no-result"><i class="fa fa-frown-o fa-5x"></i></div>'
            } else {
              resultItems.sort(function (resultLeft, resultRight) {
                if (resultLeft.searchTextCount !== resultRight.searchTextCount) {
                  return resultRight.searchTextCount - resultLeft.searchTextCount;
                } else if (resultLeft.hitCount !== resultRight.hitCount) {
                  return resultRight.hitCount - resultLeft.hitCount;
                } else {
                  return resultRight.id - resultLeft.id;
                }
              });
              var searchResultList = '<ul class=\"search-result-list\">';
              resultItems.forEach(function (result) {
                searchResultList += result.item;
              })
              searchResultList += "</ul>";
              resultContent.innerHTML = searchResultList;
            }
          }

          if ('auto' === 'auto') {
            input.addEventListener('input', inputEventFunction);
          } else {
            $('.search-icon').click(inputEventFunction);
            input.addEventListener('keypress', function (event) {
              if (event.keyCode === 13) {
                inputEventFunction();
              }
            });
          }

          // remove loading animation
          $(".local-search-pop-overlay").remove();
          $('body').css('overflow', '');

          proceedsearch();
        }
      });
    }

    // handle and trigger popup window;
    $('.popup-trigger').click(function(e) {
      e.stopPropagation();
      if (isfetched === false) {
        searchFunc(path, 'local-search-input', 'local-search-result');
      } else {
        proceedsearch();
      };
    });

    $('.popup-btn-close').click(onPopupClose);
    $('.popup').click(function(e){
      e.stopPropagation();
    });
    $(document).on('keyup', function (event) {
      var shouldDismissSearchPopup = event.which === 27 &&
        $('.search-popup').is(':visible');
      if (shouldDismissSearchPopup) {
        onPopupClose();
      }
    });
  </script>





  

  

  
  

  
  

  


  

  

  
  <script>
    (function(){
      var bp = document.createElement('script');
      var curProtocol = window.location.protocol.split(':')[0];
      bp.src = (curProtocol === 'https') ? 'https://zz.bdstatic.com/linksubmit/push.js' : 'http://push.zhanzhang.baidu.com/push.js';
      var s = document.getElementsByTagName("script")[0];
      s.parentNode.insertBefore(bp, s);
    })();
  </script>


  

  

  

  

  

  

  

  

</body>
</html>
